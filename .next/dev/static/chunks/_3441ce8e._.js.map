{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/foodIndex.ts"],"sourcesContent":["import foods from \"@/data/foods_clean.json\";\n\nexport type FoodLite = {\n  id: string;\n  name: string;\n};\n\ntype Index = {\n  foods: FoodLite[];\n  tokenMap: Map<string, number[]>; // token â†’ food indexes\n};\n\nlet index: Index | null = null;\n\nfunction normalize(text: string) {\n  return text.toLowerCase().replace(/[^a-z0-9\\s]/g, \"\");\n}\n\nexport function buildFoodIndex() {\n  if (index) return index;\n\n  const foodsLite: FoodLite[] = foods.map(f => ({\n    id: f.id,\n    name: f.name,\n  }));\n\n  const tokenMap = new Map<string, number[]>();\n\n  foodsLite.forEach((food, i) => {\n    const tokens = normalize(food.name).split(\" \");\n\n    for (const token of tokens) {\n      if (token.length < 2) continue;\n\n      if (!tokenMap.has(token)) {\n        tokenMap.set(token, []);\n      }\n      tokenMap.get(token)!.push(i);\n    }\n  });\n\n  index = { foods: foodsLite, tokenMap };\n  return index;\n}\n"],"names":[],"mappings":";;;;AAAA;;AAYA,IAAI,QAAsB;AAE1B,SAAS,UAAU,IAAY;IAC7B,OAAO,KAAK,WAAW,GAAG,OAAO,CAAC,gBAAgB;AACpD;AAEO,SAAS;IACd,IAAI,OAAO,OAAO;IAElB,MAAM,YAAwB,sGAAK,CAAC,GAAG,CAAC,CAAA,IAAK,CAAC;YAC5C,IAAI,EAAE,EAAE;YACR,MAAM,EAAE,IAAI;QACd,CAAC;IAED,MAAM,WAAW,IAAI;IAErB,UAAU,OAAO,CAAC,CAAC,MAAM;QACvB,MAAM,SAAS,UAAU,KAAK,IAAI,EAAE,KAAK,CAAC;QAE1C,KAAK,MAAM,SAAS,OAAQ;YAC1B,IAAI,MAAM,MAAM,GAAG,GAAG;YAEtB,IAAI,CAAC,SAAS,GAAG,CAAC,QAAQ;gBACxB,SAAS,GAAG,CAAC,OAAO,EAAE;YACxB;YACA,SAAS,GAAG,CAAC,OAAQ,IAAI,CAAC;QAC5B;IACF;IAEA,QAAQ;QAAE,OAAO;QAAW;IAAS;IACrC,OAAO;AACT"}},
    {"offset": {"line": 44, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/foodSearch.ts"],"sourcesContent":["import { buildFoodIndex } from \"./foodIndex\";\n\nfunction intersect(a: number[], b: number[]) {\n  const set = new Set(a);\n  return b.filter(x => set.has(x));\n}\n\nexport function searchFoods(\n  query: string,\n  limit = 50\n) {\n  const q = query.trim().toLowerCase();\n  if (!q) return [];\n\n  const index = buildFoodIndex();\n  const tokens = q.split(\" \");\n\n  let results: number[] | null = null;\n\n  for (const token of tokens) {\n    const matches = index.tokenMap.get(token);\n    if (!matches) return [];\n\n    results = results\n      ? intersect(results, matches)\n      : matches;\n  }\n\n  if (!results) return [];\n\n  return results\n    .slice(0, limit)\n    .map(i => index.foods[i]);\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEA,SAAS,UAAU,CAAW,EAAE,CAAW;IACzC,MAAM,MAAM,IAAI,IAAI;IACpB,OAAO,EAAE,MAAM,CAAC,CAAA,IAAK,IAAI,GAAG,CAAC;AAC/B;AAEO,SAAS,YACd,KAAa,EACb,QAAQ,EAAE;IAEV,MAAM,IAAI,MAAM,IAAI,GAAG,WAAW;IAClC,IAAI,CAAC,GAAG,OAAO,EAAE;IAEjB,MAAM,QAAQ,IAAA,qIAAc;IAC5B,MAAM,SAAS,EAAE,KAAK,CAAC;IAEvB,IAAI,UAA2B;IAE/B,KAAK,MAAM,SAAS,OAAQ;QAC1B,MAAM,UAAU,MAAM,QAAQ,CAAC,GAAG,CAAC;QACnC,IAAI,CAAC,SAAS,OAAO,EAAE;QAEvB,UAAU,UACN,UAAU,SAAS,WACnB;IACN;IAEA,IAAI,CAAC,SAAS,OAAO,EAAE;IAEvB,OAAO,QACJ,KAAK,CAAC,GAAG,OACT,GAAG,CAAC,CAAA,IAAK,MAAM,KAAK,CAAC,EAAE;AAC5B"}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/nutrientRegistry.ts"],"sourcesContent":["import nutrientData from \"@/data/nutrients.json\";\n\nexport type NutrientDef = {\n  id: string;\n  label: string;\n  unit: string;\n  usda_names: string[];\n};\n\nconst nutrients: NutrientDef[] = nutrientData.nutrients;\n\n// Map USDA name â†’ nutrient ID\nconst usdaNameToId = new Map<string, NutrientDef>();\n\nfor (const n of nutrients) {\n  for (const name of n.usda_names) {\n    usdaNameToId.set(name, n);\n  }\n}\n\nexport function getNutrientByUsdaName(name: string): NutrientDef | undefined {\n  return usdaNameToId.get(name);\n}\n\nexport function getNutrientById(id: string): NutrientDef | undefined {\n  return nutrients.find(n => n.id === id);\n}\n\nexport function getAllNutrients(): NutrientDef[] {\n  return nutrients;\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AASA,MAAM,YAA2B,oGAAY,CAAC,SAAS;AAEvD,8BAA8B;AAC9B,MAAM,eAAe,IAAI;AAEzB,KAAK,MAAM,KAAK,UAAW;IACzB,KAAK,MAAM,QAAQ,EAAE,UAAU,CAAE;QAC/B,aAAa,GAAG,CAAC,MAAM;IACzB;AACF;AAEO,SAAS,sBAAsB,IAAY;IAChD,OAAO,aAAa,GAAG,CAAC;AAC1B;AAEO,SAAS,gBAAgB,EAAU;IACxC,OAAO,UAAU,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;AACtC;AAEO,SAAS;IACd,OAAO;AACT"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/userProfile.ts"],"sourcesContent":["import type { RecommendationSetId } from \"@/data/recommendations\";\n\nexport type UserProfile = {\n  recommendationSet: RecommendationSetId;\n  sex: \"male\" | \"female\";\n  age: number;\n};\n\nlet userProfile: UserProfile = {\n  recommendationSet: \"fda_dv_2024\",\n  sex: \"female\",\n  age: 30,\n};\n\nexport function getUserProfile(): UserProfile {\n  return userProfile;\n}\n\nexport function updateUserProfile(update: Partial<UserProfile>) {\n  userProfile = { ...userProfile, ...update };\n}\n"],"names":[],"mappings":";;;;;;AAQA,IAAI,cAA2B;IAC7B,mBAAmB;IACnB,KAAK;IACL,KAAK;AACP;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS,kBAAkB,MAA4B;IAC5D,cAAc;QAAE,GAAG,WAAW;QAAE,GAAG,MAAM;IAAC;AAC5C"}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/localStore.ts"],"sourcesContent":["// lib/localStore.ts\n// Cross-platform local persistence:\n// - Web: localStorage\n// - Mobile (React Native / Expo): AsyncStorage\n\nlet AsyncStorage: any = null;\n\nconst isWeb =\n  typeof window !== \"undefined\" &&\n  typeof window.localStorage !== \"undefined\";\n\nif (!isWeb) {\n  try {\n    AsyncStorage =\n      require(\"@react-native-async-storage/async-storage\").default;\n  } catch {\n    AsyncStorage = null;\n  }\n}\n\nconst KEY = \"nutrition_app_db\";\n\nexport async function loadLocalDB<T>(): Promise<T | null> {\n  if (isWeb) {\n    const raw = window.localStorage.getItem(KEY);\n    return raw ? JSON.parse(raw) : null;\n  }\n\n  if (AsyncStorage) {\n    const raw = await AsyncStorage.getItem(KEY);\n    return raw ? JSON.parse(raw) : null;\n  }\n\n  return null;\n}\n\nexport async function saveLocalDB<T>(data: T): Promise<void> {\n  const serialized = JSON.stringify(data);\n\n  if (isWeb) {\n    window.localStorage.setItem(KEY, serialized);\n    return;\n  }\n\n  if (AsyncStorage) {\n    await AsyncStorage.setItem(KEY, serialized);\n  }\n}\n"],"names":[],"mappings":";;;;;;AAAA,oBAAoB;AACpB,oCAAoC;AACpC,sBAAsB;AACtB,+CAA+C;AAE/C,IAAI,eAAoB;AAExB,MAAM,QACJ,+CAAkB,eAClB,OAAO,OAAO,YAAY,KAAK;AAEjC,IAAI,CAAC,OAAO;IACV,IAAI;QACF,eACE;;;;aAAqD,OAAO;IAChE,EAAE,OAAM;QACN,eAAe;IACjB;AACF;AAEA,MAAM,MAAM;AAEL,eAAe;IACpB,IAAI,OAAO;QACT,MAAM,MAAM,OAAO,YAAY,CAAC,OAAO,CAAC;QACxC,OAAO,MAAM,KAAK,KAAK,CAAC,OAAO;IACjC;IAEA,IAAI,cAAc;QAChB,MAAM,MAAM,MAAM,aAAa,OAAO,CAAC;QACvC,OAAO,MAAM,KAAK,KAAK,CAAC,OAAO;IACjC;IAEA,OAAO;AACT;AAEO,eAAe,YAAe,IAAO;IAC1C,MAAM,aAAa,KAAK,SAAS,CAAC;IAElC,IAAI,OAAO;QACT,OAAO,YAAY,CAAC,OAAO,CAAC,KAAK;QACjC;IACF;IAEA,IAAI,cAAc;QAChB,MAAM,aAAa,OAAO,CAAC,KAAK;IAClC;AACF"}},
    {"offset": {"line": 188, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/db.ts"],"sourcesContent":["const DB_NAME = \"nutrition_app\";\nconst DB_VERSION = 1;\n\nconst STORE_INTAKE = \"intake_log\";\n// db.ts (replace in-memory-only logic)\n\nimport { loadLocalDB, saveLocalDB } from \"./localStore\";\n\nexport type DBState = {\n  foodLog: Record<string, any[]>;\n  userProfile: any;\n  nutrientOverrides: Record<string, number>;\n};\n\n\nlet db: DBState = {\n  foodLog: {},\n  userProfile: null,\n  nutrientOverrides: {},   // ðŸ‘ˆ add this\n};\n\n\nexport async function initDB() {\n  const stored = await loadLocalDB<DBState>();\n  if (stored) db = stored;\n}\n\nexport function getDB() {\n  return db;\n}\n\nexport async function updateDB(mutator: (db: DBState) => void) {\n  mutator(db);\n  await saveLocalDB(db);\n}\n\nlet dbPromise: Promise<IDBDatabase> | null = null;\n\nfunction openDB(): Promise<IDBDatabase> {\n  if (dbPromise) return dbPromise;\n\n  dbPromise = new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n    request.onupgradeneeded = () => {\n      const db = request.result;\n\n      if (!db.objectStoreNames.contains(STORE_INTAKE)) {\n        db.createObjectStore(STORE_INTAKE, {\n          keyPath: \"id\",\n          autoIncrement: true,\n        });\n      }\n    };\n\n    request.onsuccess = () => resolve(request.result);\n    request.onerror = () => reject(request.error);\n  });\n\n  return dbPromise;\n}\n\n// ---------- Public API ----------\n\nexport async function addIntake(entry: any) {\n  const db = await openDB();\n  const tx = db.transaction(STORE_INTAKE, \"readwrite\");\n  tx.objectStore(STORE_INTAKE).add(entry);\n\n  return tx.oncomplete;\n}\n\nexport async function getAllIntake(): Promise<any[]> {\n  const db = await openDB();\n  const tx = db.transaction(STORE_INTAKE, \"readonly\");\n  const store = tx.objectStore(STORE_INTAKE);\n\n  return new Promise(resolve => {\n    const request = store.getAll();\n    request.onsuccess = () => resolve(request.result);\n  });\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAIA,uCAAuC;AAEvC;AANA,MAAM,UAAU;AAChB,MAAM,aAAa;AAEnB,MAAM,eAAe;;AAYrB,IAAI,KAAc;IAChB,SAAS,CAAC;IACV,aAAa;IACb,mBAAmB,CAAC;AACtB;AAGO,eAAe;IACpB,MAAM,SAAS,MAAM,IAAA,mIAAW;IAChC,IAAI,QAAQ,KAAK;AACnB;AAEO,SAAS;IACd,OAAO;AACT;AAEO,eAAe,SAAS,OAA8B;IAC3D,QAAQ;IACR,MAAM,IAAA,mIAAW,EAAC;AACpB;AAEA,IAAI,YAAyC;AAE7C,SAAS;IACP,IAAI,WAAW,OAAO;IAEtB,YAAY,IAAI,QAAQ,CAAC,SAAS;QAChC,MAAM,UAAU,UAAU,IAAI,CAAC,SAAS;QAExC,QAAQ,eAAe,GAAG;YACxB,MAAM,KAAK,QAAQ,MAAM;YAEzB,IAAI,CAAC,GAAG,gBAAgB,CAAC,QAAQ,CAAC,eAAe;gBAC/C,GAAG,iBAAiB,CAAC,cAAc;oBACjC,SAAS;oBACT,eAAe;gBACjB;YACF;QACF;QAEA,QAAQ,SAAS,GAAG,IAAM,QAAQ,QAAQ,MAAM;QAChD,QAAQ,OAAO,GAAG,IAAM,OAAO,QAAQ,KAAK;IAC9C;IAEA,OAAO;AACT;AAIO,eAAe,UAAU,KAAU;IACxC,MAAM,KAAK,MAAM;IACjB,MAAM,KAAK,GAAG,WAAW,CAAC,cAAc;IACxC,GAAG,WAAW,CAAC,cAAc,GAAG,CAAC;IAEjC,OAAO,GAAG,UAAU;AACtB;AAEO,eAAe;IACpB,MAAM,KAAK,MAAM;IACjB,MAAM,KAAK,GAAG,WAAW,CAAC,cAAc;IACxC,MAAM,QAAQ,GAAG,WAAW,CAAC;IAE7B,OAAO,IAAI,QAAQ,CAAA;QACjB,MAAM,UAAU,MAAM,MAAM;QAC5B,QAAQ,SAAS,GAAG,IAAM,QAAQ,QAAQ,MAAM;IAClD;AACF"}},
    {"offset": {"line": 263, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/recommendationEngine.ts"],"sourcesContent":["import { getDB } from \"@/lib/db\";\nimport {\n  RECOMMENDATION_SETS,\n  type RecommendationSetId,\n} from \"@/data/recommendations\";\n\ntype Sex = \"male\" | \"female\";\n\nexport type Profile = {\n  recommendationSet: RecommendationSetId;\n  sex: Sex;\n  age: number;\n};\n\nexport function getDailyTargets(\n  profile: Profile\n): Record<string, number> {\n  const db = getDB();\n  const overrides = db.nutrientOverrides ?? {};\n\n  const set = RECOMMENDATION_SETS[profile.recommendationSet];\n  const targets: Record<string, number> = {};\n\n  for (const r of set.recommendations) {\n    if (\n      (r.sex === \"any\" || r.sex === profile.sex) &&\n      profile.age >= r.age_min &&\n      profile.age <= r.age_max\n    ) {\n      targets[r.nutrient_id] = r.daily_value;\n    }\n  }\n\n  // overrides always win\n  for (const [id, value] of Object.entries(overrides)) {\n    targets[id] = value as number;\n  }\n\n  return targets;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAaO,SAAS,gBACd,OAAgB;IAEhB,MAAM,KAAK,IAAA,qHAAK;IAChB,MAAM,YAAY,GAAG,iBAAiB,IAAI,CAAC;IAE3C,MAAM,MAAM,0JAAmB,CAAC,QAAQ,iBAAiB,CAAC;IAC1D,MAAM,UAAkC,CAAC;IAEzC,KAAK,MAAM,KAAK,IAAI,eAAe,CAAE;QACnC,IACE,CAAC,EAAE,GAAG,KAAK,SAAS,EAAE,GAAG,KAAK,QAAQ,GAAG,KACzC,QAAQ,GAAG,IAAI,EAAE,OAAO,IACxB,QAAQ,GAAG,IAAI,EAAE,OAAO,EACxB;YACA,OAAO,CAAC,EAAE,WAAW,CAAC,GAAG,EAAE,WAAW;QACxC;IACF;IAEA,uBAAuB;IACvB,KAAK,MAAM,CAAC,IAAI,MAAM,IAAI,OAAO,OAAO,CAAC,WAAY;QACnD,OAAO,CAAC,GAAG,GAAG;IAChB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/nutritionEngine.ts"],"sourcesContent":["// /lib/nutritionEngine.ts\n\nimport { getFoodById } from \"@/lib/foodData\";\nimport { addIntake, getAllIntake } from \"@/lib/db\";\nimport { getNutrientById } from \"@/lib/nutrientRegistry\";\nimport { getUserProfile } from \"@/lib/userProfile\";\nimport { getDailyTargets } from \"@/lib/recommendationEngine\";\n\n\n// ---------- Types ----------\nexport type NutrientContribution = {\n  foodName: string;\n  amount: number;\n};\n\nexport type NutrientDetail = {\n  name: string;\n  unit: string;\n  intake: number;\n  target: number;\n  progress: number;\n  contributions: NutrientContribution[];\n};\n\nexport type IntakeEntry = {\n  foodId: string;\n  grams: number;\n  date: string; // ISO\n};\n\nexport type NutrientProgress = {\n  id: string;\n  name: string;\n  progress: number; // 0â€“100\n};\n\nexport type WeeklyProgress = {\n  overall: number;\n  focus: NutrientProgress[];\n};\n\n// ---------- TEMP: Weekly Targets ----------\n// These will later come from recommendation tables\nconst weeklyTargets: Record<string, number> = {\n  protein: 350,\n  iron: 126,\n  vitamin_c: 525,\n};\n\n\n\n// ---------- Helpers ----------\n\nfunction getWeekStart(date = new Date()) {\n  const d = new Date(date);\n  const day = d.getDay(); // 0 = Sun\n  const diff = d.getDate() - day;\n  d.setDate(diff);\n  d.setHours(0, 0, 0, 0);\n  return d.toISOString();\n}\n\nfunction isSameWeek(dateIso: string, weekStartIso: string) {\n  return dateIso >= weekStartIso;\n}\n\n\n// ---------- Core Logic ----------\n// lib/nutritionEngine.ts\nimport { updateDB } from \"./db\";\nimport foods from \"@/data/foods_clean.json\";\n\nexport async function logFood(foodId: string, grams: number) {\n  const food = foods.find(f => f.id === foodId);\n  if (!food) return;\n\n  const date = new Date().toISOString().slice(0, 10);\n\n  await updateDB((db) => {\n    if (!db.foodLog[date]) db.foodLog[date] = [];\n    db.foodLog[date].push({\n      id: food.id,\n      name: food.name,\n      grams,\n      nutrients: food.nutrients,\n      loggedAt: Date.now(),\n    });\n  });\n\n  // nutrient aggregation logic stays here\n}\n\nimport { getDB, initDB } from \"@/lib/db\";\n\nexport async function getWeeklyProgress(): Promise<WeeklyProgress> {\n  await initDB();\n  const db = getDB();\n\n  const weekStart = getWeekStart();\n  const profile = getUserProfile();\n  const dailyTargets = getDailyTargets(profile);\n\n  const weeklyTargets: Record<string, number> = {};\n  for (const [nutrientId, daily] of Object.entries(dailyTargets)) {\n    weeklyTargets[nutrientId] = daily * 7;\n  }\n\n  let totals: Record<string, number> = {};\n\n  for (const [date, foods] of Object.entries(db.foodLog)) {\n    if (!isSameWeek(date, weekStart)) continue;\n\n    for (const entry of foods) {\n      const factor = entry.grams / 100;\n\n      for (const [nutrientId, amountPer100g] of Object.entries(\n        entry.nutrients as Record<string, number>\n      )) {\n        totals[nutrientId] =\n          (totals[nutrientId] ?? 0) + amountPer100g * factor;\n      }\n    }\n  }\n\n\n  const nutrientProgress: NutrientProgress[] = [];\n\n  for (const [nutrientId, target] of Object.entries(weeklyTargets)) {\n  if (!target || target <= 0) continue;\n  if (!(nutrientId in totals)) continue;\n    const intake = totals[nutrientId] ?? 0;\n    const def = getNutrientById(nutrientId);\n    if (!def) continue;\n\n    nutrientProgress.push({\n      id: nutrientId,\n      name: def.label,\n      progress: Math.min(100, Math.round((intake / target) * 100)),\n    });\n  }\n\n  const overall =\n    nutrientProgress.length === 0\n      ? 0\n      : nutrientProgress.reduce((s, n) => s + n.progress, 0) /\n        nutrientProgress.length;\n\n  console.log(\"totals\", totals);\n  console.log(\"daily targets\", dailyTargets);\n\n\n  return {\n    overall: Math.round(overall),\n    focus: nutrientProgress\n      .filter(n => n.progress < 100)\n      .sort((a, b) => a.progress - b.progress),\n  };\n  \n}\nexport async function getNutrientDetail(\n  nutrientId: string\n): Promise<NutrientDetail | null> {\n  await initDB();\n  const db = getDB();\n\n  const weekStart = getWeekStart();\n  const profile = getUserProfile();\n  const dailyTargets = getDailyTargets(profile);\n\n  const target = dailyTargets[nutrientId]\n    ? dailyTargets[nutrientId] * 7\n    : null;\n  if (!target) return null;\n\n  const def = getNutrientById(nutrientId);\n  if (!def) return null;\n\n  let total = 0;\n  const grouped: Record<string, number> = {};\n\n  for (const [date, foods] of Object.entries(db.foodLog)) {\n    if (!isSameWeek(date, weekStart)) continue;\n\n    for (const entry of foods as any[]) {\n      const factor = entry.grams / 100;\n      const amountPer100g = entry.nutrients?.[nutrientId];\n      if (!amountPer100g) continue;\n\n      const amount = amountPer100g * factor;\n      total += amount;\n\n      grouped[entry.name] =\n        (grouped[entry.name] ?? 0) + amount;\n    }\n  }\n\n  const contributions = Object.entries(grouped)\n    .map(([foodName, amount]) => ({\n      foodName,\n      amount: Number(amount.toFixed(2)),\n    }))\n    .sort((a, b) => b.amount - a.amount)\n    .slice(0, 5);\n\n  return {\n    name: def.label,\n    unit: def.unit,\n    intake: Number(total.toFixed(2)),\n    target,\n    progress: Math.min(100, Math.round((total / target) * 100)),\n    contributions,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 435, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/app/log/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { searchFoods } from \"@/lib/foodSearch\";\nimport { logFood } from \"@/lib/nutritionEngine\";\nimport { useRouter } from \"next/navigation\";\nimport { updateDB } from \"@/lib/db\";\n\nexport default function LogFoodPage() {\n  const router = useRouter();\n\n  const [query, setQuery] = useState(\"\");\n  const [results, setResults] = useState<any[]>([]);\n  const [foodId, setFoodId] = useState(\"\");\n  const [grams, setGrams] = useState(\"\");\n\n  function handleSearch(q: string) {\n    setQuery(q);\n    setResults(searchFoods(q, 40)); // CHUNK SIZE\n  }\n  async function handleAdd() {\n    await logFood(foodId, Number(grams));\n    router.push(\"/\");\n    router.refresh();\n  }\n\n\n  return (\n    <div className=\"p-4 space-y-4\">\n      <h1 className=\"text-xl font-semibold\">Log Food</h1>\n\n      <input\n        className=\"w-full p-3 rounded bg-neutral-900\"\n        placeholder=\"Search foodâ€¦\"\n        value={query}\n        onChange={e => handleSearch(e.target.value)}\n      />\n\n      <div className=\"max-h-64 overflow-y-auto space-y-2\">\n        {results.map(f => (\n          <button\n            key={f.id}\n            onClick={() => {\n              setFoodId(f.id);\n              setQuery(f.name);\n              setResults([]);\n            }}\n            className=\"block w-full text-left p-2 rounded bg-neutral-900\"\n          >\n            {f.name}\n          </button>\n        ))}\n      </div>\n\n      <input\n        type=\"number\"\n        placeholder=\"Grams eaten\"\n        className=\"w-full p-3 rounded bg-neutral-900\"\n        value={grams}\n        onChange={e => setGrams(e.target.value)}\n      />\n\n      <button\n        className=\"w-full p-3 rounded bg-emerald-600 text-black font-semibold disabled:opacity-50\"\n        disabled={!foodId || !grams}\n        onClick={handleAdd}\n      >\n        Add\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAQe,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IACnC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAQ,EAAE;IAChD,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,SAAS,aAAa,CAAS;QAC7B,SAAS;QACT,WAAW,IAAA,mIAAW,EAAC,GAAG,MAAM,aAAa;IAC/C;IACA,eAAe;QACb,MAAM,IAAA,oIAAO,EAAC,QAAQ,OAAO;QAC7B,OAAO,IAAI,CAAC;QACZ,OAAO,OAAO;IAChB;IAGA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAwB;;;;;;0BAEtC,6LAAC;gBACC,WAAU;gBACV,aAAY;gBACZ,OAAO;gBACP,UAAU,CAAA,IAAK,aAAa,EAAE,MAAM,CAAC,KAAK;;;;;;0BAG5C,6LAAC;gBAAI,WAAU;0BACZ,QAAQ,GAAG,CAAC,CAAA,kBACX,6LAAC;wBAEC,SAAS;4BACP,UAAU,EAAE,EAAE;4BACd,SAAS,EAAE,IAAI;4BACf,WAAW,EAAE;wBACf;wBACA,WAAU;kCAET,EAAE,IAAI;uBARF,EAAE,EAAE;;;;;;;;;;0BAaf,6LAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,WAAU;gBACV,OAAO;gBACP,UAAU,CAAA,IAAK,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;0BAGxC,6LAAC;gBACC,WAAU;gBACV,UAAU,CAAC,UAAU,CAAC;gBACtB,SAAS;0BACV;;;;;;;;;;;;AAKP;GA/DwB;;QACP,kJAAS;;;KADF"}}]
}