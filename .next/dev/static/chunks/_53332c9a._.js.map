{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/nutrientRegistry.ts"],"sourcesContent":["import nutrientData from \"@/data/nutrients.json\";\n\nexport type NutrientDef = {\n  id: string;\n  label: string;\n  unit: string;\n  usda_names: string[];\n};\n\nconst nutrients: NutrientDef[] = nutrientData.nutrients;\n\n// Map USDA name ‚Üí nutrient ID\nconst usdaNameToId = new Map<string, NutrientDef>();\n\nfor (const n of nutrients) {\n  for (const name of n.usda_names) {\n    usdaNameToId.set(name, n);\n  }\n}\n\nexport function getNutrientByUsdaName(name: string): NutrientDef | undefined {\n  return usdaNameToId.get(name);\n}\n\nexport function getNutrientById(id: string): NutrientDef | undefined {\n  return nutrients.find(n => n.id === id);\n}\n\nexport function getAllNutrients(): NutrientDef[] {\n  return nutrients;\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AASA,MAAM,YAA2B,oGAAY,CAAC,SAAS;AAEvD,8BAA8B;AAC9B,MAAM,eAAe,IAAI;AAEzB,KAAK,MAAM,KAAK,UAAW;IACzB,KAAK,MAAM,QAAQ,EAAE,UAAU,CAAE;QAC/B,aAAa,GAAG,CAAC,MAAM;IACzB;AACF;AAEO,SAAS,sBAAsB,IAAY;IAChD,OAAO,aAAa,GAAG,CAAC;AAC1B;AAEO,SAAS,gBAAgB,EAAU;IACxC,OAAO,UAAU,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;AACtC;AAEO,SAAS;IACd,OAAO;AACT"}},
    {"offset": {"line": 38, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/userProfile.ts"],"sourcesContent":["import type { RecommendationSetId } from \"@/data/recommendations\";\n\nexport type UserProfile = {\n  recommendationSet: RecommendationSetId;\n  sex: \"male\" | \"female\";\n  age: number;\n};\n\nlet userProfile: UserProfile = {\n  recommendationSet: \"fda_dv_2024\",\n  sex: \"female\",\n  age: 30,\n};\n\nexport function getUserProfile(): UserProfile {\n  return userProfile;\n}\n\nexport function updateUserProfile(update: Partial<UserProfile>) {\n  userProfile = { ...userProfile, ...update };\n}\n"],"names":[],"mappings":";;;;;;AAQA,IAAI,cAA2B;IAC7B,mBAAmB;IACnB,KAAK;IACL,KAAK;AACP;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS,kBAAkB,MAA4B;IAC5D,cAAc;QAAE,GAAG,WAAW;QAAE,GAAG,MAAM;IAAC;AAC5C"}},
    {"offset": {"line": 65, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/localStore.ts"],"sourcesContent":["// lib/localStore.ts\n// Cross-platform local persistence:\n// - Web: localStorage\n// - Mobile (React Native / Expo): AsyncStorage\n\nlet AsyncStorage: any = null;\n\nconst isWeb =\n  typeof window !== \"undefined\" &&\n  typeof window.localStorage !== \"undefined\";\n\nif (!isWeb) {\n  try {\n    AsyncStorage =\n      require(\"@react-native-async-storage/async-storage\").default;\n  } catch {\n    AsyncStorage = null;\n  }\n}\n// lib/localStore.ts\n// Web-only local persistence (Next.js safe)\n\nconst KEY = \"nutrition_app_db\";\n\nexport async function loadLocalDB<T>(): Promise<T | null> {\n  if (typeof window === \"undefined\") return null;\n\n  const raw = window.localStorage.getItem(KEY);\n  return raw ? JSON.parse(raw) : null;\n}\n\nexport async function saveLocalDB<T>(data: T): Promise<void> {\n  if (typeof window === \"undefined\") return;\n\n  window.localStorage.setItem(KEY, JSON.stringify(data));\n}\n"],"names":[],"mappings":";;;;;;AAAA,oBAAoB;AACpB,oCAAoC;AACpC,sBAAsB;AACtB,+CAA+C;AAE/C,IAAI,eAAoB;AAExB,MAAM,QACJ,+CAAkB,eAClB,OAAO,OAAO,YAAY,KAAK;AAEjC,IAAI,CAAC,OAAO;IACV,IAAI;QACF,eACE;;;;aAAqD,OAAO;IAChE,EAAE,OAAM;QACN,eAAe;IACjB;AACF;AACA,oBAAoB;AACpB,4CAA4C;AAE5C,MAAM,MAAM;AAEL,eAAe;IACpB;;IAEA,MAAM,MAAM,OAAO,YAAY,CAAC,OAAO,CAAC;IACxC,OAAO,MAAM,KAAK,KAAK,CAAC,OAAO;AACjC;AAEO,eAAe,YAAe,IAAO;IAC1C;;IAEA,OAAO,YAAY,CAAC,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;AAClD"}},
    {"offset": {"line": 109, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/db.ts"],"sourcesContent":["const DB_NAME = \"nutrition_app\";\nconst DB_VERSION = 1;\n\nconst STORE_INTAKE = \"intake_log\";\n// db.ts (replace in-memory-only logic)\n\nimport { loadLocalDB, saveLocalDB } from \"./localStore\";\n\nexport type DBState = {\n  foodLog: Record<string, any[]>;\n  userProfile: any;\n  nutrientOverrides: Record<string, number>;\n};\n\n\nlet db: DBState = {\n  foodLog: {},\n  userProfile: null,\n  nutrientOverrides: {},   // üëà add this\n};\n\n\nexport async function initDB() {\n  const stored = await loadLocalDB<DBState>();\n  if (stored) db = stored;\n}\n\nexport function getDB() {\n  return db;\n}\n\nexport async function updateDB(mutator: (db: DBState) => void) {\n  mutator(db);\n  await saveLocalDB(db);\n}\n\nlet dbPromise: Promise<IDBDatabase> | null = null;\n\nfunction openDB(): Promise<IDBDatabase> {\n  if (dbPromise) return dbPromise;\n\n  dbPromise = new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n    request.onupgradeneeded = () => {\n      const db = request.result;\n\n      if (!db.objectStoreNames.contains(STORE_INTAKE)) {\n        db.createObjectStore(STORE_INTAKE, {\n          keyPath: \"id\",\n          autoIncrement: true,\n        });\n      }\n    };\n\n    request.onsuccess = () => resolve(request.result);\n    request.onerror = () => reject(request.error);\n  });\n\n  return dbPromise;\n}\n\n// ---------- Public API ----------\n\nexport async function addIntake(entry: any) {\n  const db = await openDB();\n  const tx = db.transaction(STORE_INTAKE, \"readwrite\");\n  tx.objectStore(STORE_INTAKE).add(entry);\n\n  return tx.oncomplete;\n}\n\nexport async function getAllIntake(): Promise<any[]> {\n  const db = await openDB();\n  const tx = db.transaction(STORE_INTAKE, \"readonly\");\n  const store = tx.objectStore(STORE_INTAKE);\n\n  return new Promise(resolve => {\n    const request = store.getAll();\n    request.onsuccess = () => resolve(request.result);\n  });\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAIA,uCAAuC;AAEvC;AANA,MAAM,UAAU;AAChB,MAAM,aAAa;AAEnB,MAAM,eAAe;;AAYrB,IAAI,KAAc;IAChB,SAAS,CAAC;IACV,aAAa;IACb,mBAAmB,CAAC;AACtB;AAGO,eAAe;IACpB,MAAM,SAAS,MAAM,IAAA,mIAAW;IAChC,IAAI,QAAQ,KAAK;AACnB;AAEO,SAAS;IACd,OAAO;AACT;AAEO,eAAe,SAAS,OAA8B;IAC3D,QAAQ;IACR,MAAM,IAAA,mIAAW,EAAC;AACpB;AAEA,IAAI,YAAyC;AAE7C,SAAS;IACP,IAAI,WAAW,OAAO;IAEtB,YAAY,IAAI,QAAQ,CAAC,SAAS;QAChC,MAAM,UAAU,UAAU,IAAI,CAAC,SAAS;QAExC,QAAQ,eAAe,GAAG;YACxB,MAAM,KAAK,QAAQ,MAAM;YAEzB,IAAI,CAAC,GAAG,gBAAgB,CAAC,QAAQ,CAAC,eAAe;gBAC/C,GAAG,iBAAiB,CAAC,cAAc;oBACjC,SAAS;oBACT,eAAe;gBACjB;YACF;QACF;QAEA,QAAQ,SAAS,GAAG,IAAM,QAAQ,QAAQ,MAAM;QAChD,QAAQ,OAAO,GAAG,IAAM,OAAO,QAAQ,KAAK;IAC9C;IAEA,OAAO;AACT;AAIO,eAAe,UAAU,KAAU;IACxC,MAAM,KAAK,MAAM;IACjB,MAAM,KAAK,GAAG,WAAW,CAAC,cAAc;IACxC,GAAG,WAAW,CAAC,cAAc,GAAG,CAAC;IAEjC,OAAO,GAAG,UAAU;AACtB;AAEO,eAAe;IACpB,MAAM,KAAK,MAAM;IACjB,MAAM,KAAK,GAAG,WAAW,CAAC,cAAc;IACxC,MAAM,QAAQ,GAAG,WAAW,CAAC;IAE7B,OAAO,IAAI,QAAQ,CAAA;QACjB,MAAM,UAAU,MAAM,MAAM;QAC5B,QAAQ,SAAS,GAAG,IAAM,QAAQ,QAAQ,MAAM;IAClD;AACF"}},
    {"offset": {"line": 184, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/recommendationEngine.ts"],"sourcesContent":["import { getDB } from \"@/lib/db\";\nimport {\n  RECOMMENDATION_SETS,\n  type RecommendationSetId,\n} from \"@/data/recommendations\";\n\ntype Sex = \"male\" | \"female\";\n\nexport type Profile = {\n  recommendationSet: RecommendationSetId;\n  sex: Sex;\n  age: number;\n};\n\nexport function getDailyTargets(\n  profile: Profile\n): Record<string, number> {\n  const db = getDB();\n  const overrides = db.nutrientOverrides ?? {};\n\n  const set = RECOMMENDATION_SETS[profile.recommendationSet];\n  const targets: Record<string, number> = {};\n\n  for (const r of set.recommendations) {\n    if (\n      (r.sex === \"any\" || r.sex === profile.sex) &&\n      profile.age >= r.age_min &&\n      profile.age <= r.age_max\n    ) {\n      targets[r.nutrient_id] = r.daily_value;\n    }\n  }\n\n  // overrides always win\n  for (const [id, value] of Object.entries(overrides)) {\n    targets[id] = value as number;\n  }\n\n  return targets;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAaO,SAAS,gBACd,OAAgB;IAEhB,MAAM,KAAK,IAAA,qHAAK;IAChB,MAAM,YAAY,GAAG,iBAAiB,IAAI,CAAC;IAE3C,MAAM,MAAM,0JAAmB,CAAC,QAAQ,iBAAiB,CAAC;IAC1D,MAAM,UAAkC,CAAC;IAEzC,KAAK,MAAM,KAAK,IAAI,eAAe,CAAE;QACnC,IACE,CAAC,EAAE,GAAG,KAAK,SAAS,EAAE,GAAG,KAAK,QAAQ,GAAG,KACzC,QAAQ,GAAG,IAAI,EAAE,OAAO,IACxB,QAAQ,GAAG,IAAI,EAAE,OAAO,EACxB;YACA,OAAO,CAAC,EAAE,WAAW,CAAC,GAAG,EAAE,WAAW;QACxC;IACF;IAEA,uBAAuB;IACvB,KAAK,MAAM,CAAC,IAAI,MAAM,IAAI,OAAO,OAAO,CAAC,WAAY;QACnD,OAAO,CAAC,GAAG,GAAG;IAChB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 215, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/nutritionEngine.ts"],"sourcesContent":["// /lib/nutritionEngine.ts\n\nimport { getNutrientById } from \"@/lib/nutrientRegistry\";\nimport { getUserProfile } from \"@/lib/userProfile\";\nimport { getDailyTargets } from \"@/lib/recommendationEngine\";\nimport { getDB, initDB, updateDB } from \"@/lib/db\";\nimport foods from \"@/data/foods_clean.json\";\n\n/**\n * CONFIG\n * 0 = Sunday, 1 = Monday\n * MUST match History page\n */\nexport const WEEK_START = 1;\n\n// ---------- Types ----------\nexport type NutrientContribution = {\n  foodName: string;\n  amount: number;\n};\n\nexport type NutrientDetail = {\n  name: string;\n  unit: string;\n  intake: number;\n  target: number;\n  progress: number;\n  contributions: NutrientContribution[];\n};\n\nexport type NutrientProgress = {\n  id: string;\n  name: string;\n  progress: number; // 0‚Äì100\n};\n\nexport type WeeklyProgress = {\n  overall: number;\n  all: NutrientProgress[];     // ‚Üê NEW\n  focus: NutrientProgress[];\n};\n\n\n// ---------- Week Helpers ----------\n\nfunction getWeekRange(\n  baseDate: Date = new Date()\n): { start: string; end: string } {\n  const d = new Date(baseDate);\n  const diff = (d.getDay() - WEEK_START + 7) % 7;\n  d.setDate(d.getDate() - diff);\n  d.setHours(0, 0, 0, 0);\n\n  const start = new Date(d);\n  const end = new Date(d);\n  end.setDate(end.getDate() + 7);\n\n  return {\n    start: start.toISOString().slice(0, 10),\n    end: end.toISOString().slice(0, 10),\n  };\n}\n\nfunction isWithinWeek(\n  dateIso: string,\n  startIso: string,\n  endIso: string\n) {\n  return dateIso >= startIso && dateIso < endIso;\n}\n\n// ---------- Core Logic ----------\n\nexport async function logFood(foodId: string, grams: number) {\n  const food = foods.find((f) => f.id === foodId);\n  if (!food) return;\n\n  const date = new Date().toISOString().slice(0, 10);\n\n  await updateDB((db) => {\n    if (!db.foodLog[date]) db.foodLog[date] = [];\n    db.foodLog[date].push({\n      id: food.id,\n      name: food.name,\n      grams,\n      nutrients: food.nutrients,\n      loggedAt: Date.now(),\n    });\n  });\n}\n\n// ---------- Weekly Progress (Main Dashboard) ----------\n\nexport async function getWeeklyProgress(\n  baseDate: Date = new Date()\n): Promise<WeeklyProgress> {\n  await initDB();\n  const db = getDB();\n\n  const { start, end } = getWeekRange(baseDate);\n  const profile = getUserProfile();\n  const dailyTargets = getDailyTargets(profile);\n\n  const weeklyTargets: Record<string, number> = {};\n  for (const [nutrientId, daily] of Object.entries(dailyTargets)) {\n    weeklyTargets[nutrientId] = daily * 7;\n  }\n\n  const totals: Record<string, number> = {};\n\n  for (const [date, foods] of Object.entries(db.foodLog)) {\n    if (!isWithinWeek(date, start, end)) continue;\n\n    for (const entry of foods as any[]) {\n      const factor = entry.grams / 100;\n\n      for (const [nutrientId, amountPer100g] of Object.entries(\n        entry.nutrients as Record<string, number>\n      )) {\n        totals[nutrientId] =\n          (totals[nutrientId] ?? 0) + amountPer100g * factor;\n      }\n    }\n  }\n\n  const nutrientProgress: NutrientProgress[] = [];\n\n  for (const [nutrientId, target] of Object.entries(weeklyTargets)) {\n    if (!target || !(nutrientId in totals)) continue;\n\n    const def = getNutrientById(nutrientId);\n    if (!def) continue;\n\n    const intake = totals[nutrientId];\n\n    nutrientProgress.push({\n      id: nutrientId,\n      name: def.label,\n      progress: Math.min(\n        100,\n        Math.round((intake / target) * 100)\n      ),\n    });\n  }\n\n  const overall =\n    nutrientProgress.length === 0\n      ? 0\n      : nutrientProgress.reduce((s, n) => s + n.progress, 0) /\n        nutrientProgress.length;\n\n  return {\n    overall: Math.round(overall),\n    all: nutrientProgress,\n    focus: nutrientProgress\n      .filter(n => n.progress < 100)\n      .sort((a, b) => a.progress - b.progress),\n  };\n}\n\n// ---------- Nutrient Detail (Weekly) ----------\n\nexport async function getNutrientDetail(\n  nutrientId: string,\n  baseDate: Date = new Date()\n): Promise<NutrientDetail | null> {\n  await initDB();\n  const db = getDB();\n\n  const { start, end } = getWeekRange(baseDate);\n  const profile = getUserProfile();\n  const dailyTargets = getDailyTargets(profile);\n\n  const target = dailyTargets[nutrientId]\n    ? dailyTargets[nutrientId] * 7\n    : null;\n  if (!target) return null;\n\n  const def = getNutrientById(nutrientId);\n  if (!def) return null;\n\n  let total = 0;\n  const grouped: Record<string, number> = {};\n\n  for (const [date, foods] of Object.entries(db.foodLog)) {\n    if (!isWithinWeek(date, start, end)) continue;\n\n    for (const entry of foods as any[]) {\n      const factor = entry.grams / 100;\n      const amountPer100g = entry.nutrients?.[nutrientId];\n      if (!amountPer100g) continue;\n\n      const amount = amountPer100g * factor;\n      total += amount;\n\n      grouped[entry.name] =\n        (grouped[entry.name] ?? 0) + amount;\n    }\n  }\n\n  const contributions = Object.entries(grouped)\n    .map(([foodName, amount]) => ({\n      foodName,\n      amount: Number(amount.toFixed(2)),\n    }))\n    .sort((a, b) => b.amount - a.amount)\n    .slice(0, 5);\n\n  return {\n    name: def.label,\n    unit: def.unit,\n    intake: Number(total.toFixed(2)),\n    target,\n    progress: Math.min(\n      100,\n      Math.round((total / target) * 100)\n    ),\n    contributions,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 351, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/app/log/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport foods from \"@/data/foods_selected.json\";\nimport { logFood } from \"@/lib/nutritionEngine\";\nimport { useRouter } from \"next/navigation\";\n\ntype FoodGroup =\n  | \"starch\"\n  | \"meat\"\n  | \"fish\"\n  | \"seafood\"\n  | \"vegetables\"\n  | \"legumes\"\n  | \"fruits\"\n  | \"condiments\"\n  | \"seasonings\";\n\ntype Food = {\n  id: string;\n  term: string;\n  group: FoodGroup;\n};\n\nconst FOOD_GROUPS: FoodGroup[] = [\n  \"starch\",\n  \"meat\",\n  \"fish\",\n  \"seafood\",\n  \"vegetables\",\n  \"legumes\",\n  \"fruits\",\n  \"condiments\",\n  \"seasonings\",\n];\n\nexport default function LogFoodPage() {\n  const router = useRouter();\n\n  const [activeGroup, setActiveGroup] = useState<FoodGroup | null>(null);\n  const [foodId, setFoodId] = useState(\"\");\n  const [grams, setGrams] = useState(\"\");\n\n  const allFoods = foods as unknown as Food[];\n  const groupFoods = activeGroup\n    ? allFoods.filter(f => f.group === activeGroup)\n    : [];\n\n  async function handleAdd() {\n    await logFood(foodId, Number(grams));\n    router.push(\"/\");\n    router.refresh();\n  }\n\n  return (\n    <div className=\"p-4 space-y-4\">\n      <h1 className=\"text-xl font-semibold\">Log Food</h1>\n\n      {!activeGroup && (\n        <div className=\"grid grid-cols-3 gap-3\">\n          {FOOD_GROUPS.map(g => (\n            <button\n              key={g}\n              onClick={() => setActiveGroup(g)}\n              className=\"aspect-square rounded-xl bg-neutral-900 flex items-center justify-center font-semibold capitalize\"\n            >\n              {g}\n            </button>\n          ))}\n        </div>\n      )}\n\n      {activeGroup && (\n        <>\n          <div className=\"flex items-center gap-2\">\n            <button\n              onClick={() => {\n                setActiveGroup(null);\n                setFoodId(\"\");\n              }}\n              className=\"text-sm text-neutral-400\"\n            >\n              ‚Üê Back\n            </button>\n            <h2 className=\"text-lg font-semibold capitalize\">{activeGroup}</h2>\n          </div>\n\n          <div className=\"grid grid-cols-2 gap-3 max-h-64 overflow-y-auto\">\n            {groupFoods.map(f => (\n              <button\n                key={f.id}\n                onClick={() => setFoodId(f.id)}\n                className={`p-3 rounded-lg text-left ${\n                  foodId === f.id\n                    ? \"bg-emerald-600 text-black\"\n                    : \"bg-neutral-900\"\n                }`}\n              >\n                {f.term}\n              </button>\n            ))}\n          </div>\n        </>\n      )}\n\n      <input\n        type=\"number\"\n        placeholder=\"Grams eaten\"\n        className=\"w-full p-3 rounded bg-neutral-900\"\n        value={grams}\n        onChange={e => setGrams(e.target.value)}\n      />\n\n      <button\n        className=\"w-full p-3 rounded bg-emerald-600 text-black font-semibold disabled:opacity-50\"\n        disabled={!foodId || !grams}\n        onClick={handleAdd}\n      >\n        Add\n      </button>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AAwBA,MAAM,cAA2B;IAC/B;IACA;IACA;IACA;IACA;IACA;IACA;IACA;IACA;CACD;AAEc,SAAS;;IACtB,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,CAAC,aAAa,eAAe,GAAG,IAAA,yKAAQ,EAAmB;IACjE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAC;IAEnC,MAAM,WAAW,yGAAK;IACtB,MAAM,aAAa,cACf,SAAS,MAAM,CAAC,CAAA,IAAK,EAAE,KAAK,KAAK,eACjC,EAAE;IAEN,eAAe;QACb,MAAM,IAAA,oIAAO,EAAC,QAAQ,OAAO;QAC7B,OAAO,IAAI,CAAC;QACZ,OAAO,OAAO;IAChB;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAAwB;;;;;;YAErC,CAAC,6BACA,6LAAC;gBAAI,WAAU;0BACZ,YAAY,GAAG,CAAC,CAAA,kBACf,6LAAC;wBAEC,SAAS,IAAM,eAAe;wBAC9B,WAAU;kCAET;uBAJI;;;;;;;;;;YAUZ,6BACC;;kCACE,6LAAC;wBAAI,WAAU;;0CACb,6LAAC;gCACC,SAAS;oCACP,eAAe;oCACf,UAAU;gCACZ;gCACA,WAAU;0CACX;;;;;;0CAGD,6LAAC;gCAAG,WAAU;0CAAoC;;;;;;;;;;;;kCAGpD,6LAAC;wBAAI,WAAU;kCACZ,WAAW,GAAG,CAAC,CAAA,kBACd,6LAAC;gCAEC,SAAS,IAAM,UAAU,EAAE,EAAE;gCAC7B,WAAW,CAAC,yBAAyB,EACnC,WAAW,EAAE,EAAE,GACX,8BACA,kBACJ;0CAED,EAAE,IAAI;+BARF,EAAE,EAAE;;;;;;;;;;;;0BAenB,6LAAC;gBACC,MAAK;gBACL,aAAY;gBACZ,WAAU;gBACV,OAAO;gBACP,UAAU,CAAA,IAAK,SAAS,EAAE,MAAM,CAAC,KAAK;;;;;;0BAGxC,6LAAC;gBACC,WAAU;gBACV,UAAU,CAAC,UAAU,CAAC;gBACtB,SAAS;0BACV;;;;;;;;;;;;AAKP;GAtFwB;;QACP,kJAAS;;;KADF"}}]
}