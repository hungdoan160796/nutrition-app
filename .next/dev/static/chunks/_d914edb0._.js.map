{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/components/NutrientCard.tsx"],"sourcesContent":["// app/components/NutrientCard.tsx\nimport Link from \"next/link\";\n\ntype Props = {\n  id: string;\n  name: string;\n  progress: number;\n  compact?: boolean;\n};\n\nexport default function NutrientCard({\n  id,\n  name,\n  progress,\n  compact = false,\n}: Props) {\n  // components/NutrientCard.tsx\n  return (\n    <Link\n      href={`/nutrients/${id}`}\n      className={`rounded-xl bg-[var(--background)] border border-[var(--border)] ${\n        compact ? \"p-2\" : \"p-4\"\n      }`}\n    >\n      <div className=\"flex justify-between items-center\">\n        <span\n          className={`font-medium text-[var(--foreground)] ${\n            compact ? \"text-xs\" : \"text-sm\"\n          }`}\n        >\n          {name}\n        </span>\n\n        <span className=\"text-xs text-[var(--foreground)]\">\n          {progress}%\n        </span>\n      </div>\n\n      <div\n        className={`mt-2 bg-[var(--border)] rounded ${\n          compact ? \"h-1.5\" : \"h-2\"\n        }`}\n      >\n        <div\n          className=\"bg-[var(--accent)] rounded h-full\"\n          style={{ width: `${progress}%` }}\n        />\n      </div>\n    </Link>\n  );\n\n}\n"],"names":[],"mappings":";;;;;AAAA,kCAAkC;AAClC;;;AASe,SAAS,aAAa,EACnC,EAAE,EACF,IAAI,EACJ,QAAQ,EACR,UAAU,KAAK,EACT;IACN,8BAA8B;IAC9B,qBACE,6LAAC,0KAAI;QACH,MAAM,CAAC,WAAW,EAAE,IAAI;QACxB,WAAW,CAAC,gEAAgE,EAC1E,UAAU,QAAQ,OAClB;;0BAEF,6LAAC;gBAAI,WAAU;;kCACb,6LAAC;wBACC,WAAW,CAAC,qCAAqC,EAC/C,UAAU,YAAY,WACtB;kCAED;;;;;;kCAGH,6LAAC;wBAAK,WAAU;;4BACb;4BAAS;;;;;;;;;;;;;0BAId,6LAAC;gBACC,WAAW,CAAC,gCAAgC,EAC1C,UAAU,UAAU,OACpB;0BAEF,cAAA,6LAAC;oBACC,WAAU;oBACV,OAAO;wBAAE,OAAO,GAAG,SAAS,CAAC,CAAC;oBAAC;;;;;;;;;;;;;;;;;AAMzC;KAzCwB"}},
    {"offset": {"line": 81, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/components/ProgressRing.tsx"],"sourcesContent":["type Props = {\n  value: number;\n};\n\nexport default function ProgressRing({ value }: Props) {\n  return (\n    <div className=\"w-40 h-40 rounded-full border-8 border-[var(--border)] flex items-center justify-center\">\n      <div className=\"text-center\">\n        <div className=\"text-3xl font-bold text-[var(--foreground)]\">{value}%</div>\n        <div className=\"text-xs text-[var(--foreground)]\">weekly</div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAIe,SAAS,aAAa,EAAE,KAAK,EAAS;IACnD,qBACE,6LAAC;QAAI,WAAU;kBACb,cAAA,6LAAC;YAAI,WAAU;;8BACb,6LAAC;oBAAI,WAAU;;wBAA+C;wBAAM;;;;;;;8BACpE,6LAAC;oBAAI,WAAU;8BAAmC;;;;;;;;;;;;;;;;;AAI1D;KATwB"}},
    {"offset": {"line": 134, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/nutrientRegistry.ts"],"sourcesContent":["import nutrientData from \"@/data/nutrients.json\";\n\nexport type NutrientDef = {\n  id: string;\n  label: string;\n  unit: string;\n  usda_names: string[];\n};\n\nconst nutrients: NutrientDef[] = nutrientData.nutrients;\n\n// Map USDA name â†’ nutrient ID\nconst usdaNameToId = new Map<string, NutrientDef>();\n\nfor (const n of nutrients) {\n  for (const name of n.usda_names) {\n    usdaNameToId.set(name, n);\n  }\n}\n\nexport function getNutrientByUsdaName(name: string): NutrientDef | undefined {\n  return usdaNameToId.get(name);\n}\n\nexport function getNutrientById(id: string): NutrientDef | undefined {\n  return nutrients.find(n => n.id === id);\n}\n\nexport function getAllNutrients(): NutrientDef[] {\n  return nutrients;\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AASA,MAAM,YAA2B,oGAAY,CAAC,SAAS;AAEvD,8BAA8B;AAC9B,MAAM,eAAe,IAAI;AAEzB,KAAK,MAAM,KAAK,UAAW;IACzB,KAAK,MAAM,QAAQ,EAAE,UAAU,CAAE;QAC/B,aAAa,GAAG,CAAC,MAAM;IACzB;AACF;AAEO,SAAS,sBAAsB,IAAY;IAChD,OAAO,aAAa,GAAG,CAAC;AAC1B;AAEO,SAAS,gBAAgB,EAAU;IACxC,OAAO,UAAU,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;AACtC;AAEO,SAAS;IACd,OAAO;AACT"}},
    {"offset": {"line": 168, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/userProfile.ts"],"sourcesContent":["import type { RecommendationSetId } from \"@/data/recommendations\";\n\nexport type UserProfile = {\n  recommendationSet: RecommendationSetId;\n  sex: \"male\" | \"female\";\n  age: number;\n};\n\nlet userProfile: UserProfile = {\n  recommendationSet: \"fda_dv_2024\",\n  sex: \"female\",\n  age: 30,\n};\n\nexport function getUserProfile(): UserProfile {\n  return userProfile;\n}\n\nexport function updateUserProfile(update: Partial<UserProfile>) {\n  userProfile = { ...userProfile, ...update };\n}\n"],"names":[],"mappings":";;;;;;AAQA,IAAI,cAA2B;IAC7B,mBAAmB;IACnB,KAAK;IACL,KAAK;AACP;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS,kBAAkB,MAA4B;IAC5D,cAAc;QAAE,GAAG,WAAW;QAAE,GAAG,MAAM;IAAC;AAC5C"}},
    {"offset": {"line": 195, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/localStore.web.ts"],"sourcesContent":["const KEY = \"nutrition_app_db\";\n\nexport async function loadLocalDB<T>() {\n  const raw = localStorage.getItem(KEY);\n  return raw ? JSON.parse(raw) : null;\n}\n\nexport async function saveLocalDB<T>(data: T) {\n  localStorage.setItem(KEY, JSON.stringify(data));\n}\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,MAAM;AAEL,eAAe;IACpB,MAAM,MAAM,aAAa,OAAO,CAAC;IACjC,OAAO,MAAM,KAAK,KAAK,CAAC,OAAO;AACjC;AAEO,eAAe,YAAe,IAAO;IAC1C,aAAa,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;AAC3C"}},
    {"offset": {"line": 216, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/db.ts"],"sourcesContent":["const DB_NAME = \"nutrition_app\";\nconst DB_VERSION = 1;\n\nconst STORE_INTAKE = \"intake_log\";\n// db.ts (replace in-memory-only logic)\n\nimport { loadLocalDB, saveLocalDB } from \"./localStore.web\";\n\nexport type DBState = {\n  foodLog: Record<string, any[]>;\n  userProfile: any;\n  nutrientOverrides: Record<string, number>;\n};\n\n\nlet db: DBState = {\n  foodLog: {},\n  userProfile: null,\n  nutrientOverrides: {},   // ðŸ‘ˆ add this\n};\n\n\nexport async function initDB() {\n  const stored = await loadLocalDB<DBState>();\n  if (stored) db = stored;\n}\n\nexport function getDB() {\n  return db;\n}\n\nexport async function updateDB(mutator: (db: DBState) => void) {\n  mutator(db);\n  await saveLocalDB(db);\n}\n\nlet dbPromise: Promise<IDBDatabase> | null = null;\n\nfunction openDB(): Promise<IDBDatabase> {\n  if (dbPromise) return dbPromise;\n\n  dbPromise = new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n    request.onupgradeneeded = () => {\n      const db = request.result;\n\n      if (!db.objectStoreNames.contains(STORE_INTAKE)) {\n        db.createObjectStore(STORE_INTAKE, {\n          keyPath: \"id\",\n          autoIncrement: true,\n        });\n      }\n    };\n\n    request.onsuccess = () => resolve(request.result);\n    request.onerror = () => reject(request.error);\n  });\n\n  return dbPromise;\n}\n\n// ---------- Public API ----------\n\nexport async function addIntake(entry: any) {\n  const db = await openDB();\n  const tx = db.transaction(STORE_INTAKE, \"readwrite\");\n  tx.objectStore(STORE_INTAKE).add(entry);\n\n  return tx.oncomplete;\n}\n\nexport async function getAllIntake(): Promise<any[]> {\n  const db = await openDB();\n  const tx = db.transaction(STORE_INTAKE, \"readonly\");\n  const store = tx.objectStore(STORE_INTAKE);\n\n  return new Promise(resolve => {\n    const request = store.getAll();\n    request.onsuccess = () => resolve(request.result);\n  });\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAIA,uCAAuC;AAEvC;AANA,MAAM,UAAU;AAChB,MAAM,aAAa;AAEnB,MAAM,eAAe;;AAYrB,IAAI,KAAc;IAChB,SAAS,CAAC;IACV,aAAa;IACb,mBAAmB,CAAC;AACtB;AAGO,eAAe;IACpB,MAAM,SAAS,MAAM,IAAA,0IAAW;IAChC,IAAI,QAAQ,KAAK;AACnB;AAEO,SAAS;IACd,OAAO;AACT;AAEO,eAAe,SAAS,OAA8B;IAC3D,QAAQ;IACR,MAAM,IAAA,0IAAW,EAAC;AACpB;AAEA,IAAI,YAAyC;AAE7C,SAAS;IACP,IAAI,WAAW,OAAO;IAEtB,YAAY,IAAI,QAAQ,CAAC,SAAS;QAChC,MAAM,UAAU,UAAU,IAAI,CAAC,SAAS;QAExC,QAAQ,eAAe,GAAG;YACxB,MAAM,KAAK,QAAQ,MAAM;YAEzB,IAAI,CAAC,GAAG,gBAAgB,CAAC,QAAQ,CAAC,eAAe;gBAC/C,GAAG,iBAAiB,CAAC,cAAc;oBACjC,SAAS;oBACT,eAAe;gBACjB;YACF;QACF;QAEA,QAAQ,SAAS,GAAG,IAAM,QAAQ,QAAQ,MAAM;QAChD,QAAQ,OAAO,GAAG,IAAM,OAAO,QAAQ,KAAK;IAC9C;IAEA,OAAO;AACT;AAIO,eAAe,UAAU,KAAU;IACxC,MAAM,KAAK,MAAM;IACjB,MAAM,KAAK,GAAG,WAAW,CAAC,cAAc;IACxC,GAAG,WAAW,CAAC,cAAc,GAAG,CAAC;IAEjC,OAAO,GAAG,UAAU;AACtB;AAEO,eAAe;IACpB,MAAM,KAAK,MAAM;IACjB,MAAM,KAAK,GAAG,WAAW,CAAC,cAAc;IACxC,MAAM,QAAQ,GAAG,WAAW,CAAC;IAE7B,OAAO,IAAI,QAAQ,CAAA;QACjB,MAAM,UAAU,MAAM,MAAM;QAC5B,QAAQ,SAAS,GAAG,IAAM,QAAQ,QAAQ,MAAM;IAClD;AACF"}},
    {"offset": {"line": 291, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/recommendationEngine.ts"],"sourcesContent":["import { getDB } from \"@/lib/db\";\nimport {\n  RECOMMENDATION_SETS,\n  type RecommendationSetId,\n} from \"@/data/recommendations\";\n\ntype Sex = \"male\" | \"female\";\n\nexport type Profile = {\n  recommendationSet: RecommendationSetId;\n  sex: Sex;\n  age: number;\n};\n\nexport function getDailyTargets(\n  profile: Profile\n): Record<string, number> {\n  const db = getDB();\n  const overrides = db.nutrientOverrides ?? {};\n\n  const set = RECOMMENDATION_SETS[profile.recommendationSet];\n  const targets: Record<string, number> = {};\n\n  for (const r of set.recommendations) {\n    if (\n      (r.sex === \"any\" || r.sex === profile.sex) &&\n      profile.age >= r.age_min &&\n      profile.age <= r.age_max\n    ) {\n      targets[r.nutrient_id] = r.daily_value;\n    }\n  }\n\n  // overrides always win\n  for (const [id, value] of Object.entries(overrides)) {\n    targets[id] = value as number;\n  }\n\n  return targets;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAaO,SAAS,gBACd,OAAgB;IAEhB,MAAM,KAAK,IAAA,qHAAK;IAChB,MAAM,YAAY,GAAG,iBAAiB,IAAI,CAAC;IAE3C,MAAM,MAAM,0JAAmB,CAAC,QAAQ,iBAAiB,CAAC;IAC1D,MAAM,UAAkC,CAAC;IAEzC,KAAK,MAAM,KAAK,IAAI,eAAe,CAAE;QACnC,IACE,CAAC,EAAE,GAAG,KAAK,SAAS,EAAE,GAAG,KAAK,QAAQ,GAAG,KACzC,QAAQ,GAAG,IAAI,EAAE,OAAO,IACxB,QAAQ,GAAG,IAAI,EAAE,OAAO,EACxB;YACA,OAAO,CAAC,EAAE,WAAW,CAAC,GAAG,EAAE,WAAW;QACxC;IACF;IAEA,uBAAuB;IACvB,KAAK,MAAM,CAAC,IAAI,MAAM,IAAI,OAAO,OAAO,CAAC,WAAY;QACnD,OAAO,CAAC,GAAG,GAAG;IAChB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 322, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/nutritionEngine.ts"],"sourcesContent":["// /lib/nutritionEngine.ts\n\nimport { getNutrientById } from \"@/lib/nutrientRegistry\";\nimport { getUserProfile } from \"@/lib/userProfile\";\nimport { getDailyTargets } from \"@/lib/recommendationEngine\";\nimport { getDB, initDB, updateDB } from \"@/lib/db\";\nimport foods from \"@/data/foods_clean.json\";\n\n/**\n * CONFIG\n * 0 = Sunday, 1 = Monday\n * MUST match History page\n */\nexport const WEEK_START = 1;\n\n// ---------- Types ----------\nexport type NutrientContribution = {\n  foodName: string;\n  amount: number;\n};\n\nexport type NutrientDetail = {\n  name: string;\n  unit: string;\n  intake: number;\n  target: number;\n  progress: number;\n  contributions: NutrientContribution[];\n};\n\nexport type NutrientProgress = {\n  id: string;\n  name: string;\n  progress: number; // 0â€“100\n};\n\nexport type WeeklyProgress = {\n  overall: number;\n  all: NutrientProgress[];     // â† NEW\n  focus: NutrientProgress[];\n};\n\n\n// ---------- Week Helpers ----------\n\nfunction getWeekRange(\n  baseDate: Date = new Date()\n): { start: string; end: string } {\n  const d = new Date(baseDate);\n  const diff = (d.getDay() - WEEK_START + 7) % 7;\n  d.setDate(d.getDate() - diff);\n  d.setHours(0, 0, 0, 0);\n\n  const start = new Date(d);\n  const end = new Date(d);\n  end.setDate(end.getDate() + 7);\n\n  return {\n    start: start.toISOString().slice(0, 10),\n    end: end.toISOString().slice(0, 10),\n  };\n}\n\nfunction isWithinWeek(\n  dateIso: string,\n  startIso: string,\n  endIso: string\n) {\n  return dateIso >= startIso && dateIso < endIso;\n}\n\n// ---------- Core Logic ----------\n// lib/nutritionEngine.ts\n\ntype Food = {\n  term: string;\n  name: string;\n  nutrients: any;\n};\nexport async function logFood(term: string, grams: number) {\n  const food = (foods as Food[]).find((f) => f.term === term);\n  if (!food) return;\n\n  const date = new Date().toISOString().slice(0, 10);\n\n  const progress = computeFoodProgress(food.nutrients, grams);\n\n  await updateDB((db) => {\n    if (!db.foodLog[date]) db.foodLog[date] = [];\n\n    db.foodLog[date].push({\n      term: food.term,\n      name: food.name,\n      grams,\n      nutrients: food.nutrients,\n      progress,     // âœ… HistoryPage compatible\n      loggedAt: Date.now(),\n    });\n  });\n}\n\n// ---------- Weekly Progress (Main Dashboard) ----------\n\nexport async function getWeeklyProgress(\n  baseDate: Date = new Date()\n): Promise<WeeklyProgress> {\n  await initDB();\n  const db = getDB();\n\n  const { start, end } = getWeekRange(baseDate);\n  const profile = getUserProfile();\n  const dailyTargets = getDailyTargets(profile);\n\n  const weeklyTargets: Record<string, number> = {};\n  for (const [nutrientId, daily] of Object.entries(dailyTargets)) {\n    weeklyTargets[nutrientId] = daily * 7;\n  }\n\n  const totals: Record<string, number> = {};\n\n  for (const [date, foods] of Object.entries(db.foodLog)) {\n    if (!isWithinWeek(date, start, end)) continue;\n\n    for (const entry of foods as any[]) {\n      const factor = entry.grams / 100;\n\n      for (const [nutrientId, amountPer100g] of Object.entries(\n        entry.nutrients as Record<string, number>\n      )) {\n        totals[nutrientId] =\n          (totals[nutrientId] ?? 0) + amountPer100g * factor;\n      }\n    }\n  }\n\n  const nutrientProgress: NutrientProgress[] = [];\n\n  for (const [nutrientId, target] of Object.entries(weeklyTargets)) {\n    if (!target || !(nutrientId in totals)) continue;\n\n    const def = getNutrientById(nutrientId);\n    if (!def) continue;\n\n    const intake = totals[nutrientId];\n\n    nutrientProgress.push({\n      id: nutrientId,\n      name: def.label,\n      progress: Math.min(\n        100,\n        Math.round((intake / target) * 100)\n      ),\n    });\n  }\n\n  const overall =\n    nutrientProgress.length === 0\n      ? 0\n      : nutrientProgress.reduce((s, n) => s + n.progress, 0) /\n        nutrientProgress.length;\n\n  return {\n    overall: Math.round(overall),\n    all: nutrientProgress,\n    focus: nutrientProgress\n      .filter(n => n.progress < 100)\n      .sort((a, b) => a.progress - b.progress),\n  };\n}\n\n// ---------- Nutrient Detail (Weekly) ----------\n\nexport async function getNutrientDetail(\n  nutrientId: string,\n  baseDate: Date = new Date()\n): Promise<NutrientDetail | null> {\n  await initDB();\n  const db = getDB();\n\n  const { start, end } = getWeekRange(baseDate);\n  const profile = getUserProfile();\n  const dailyTargets = getDailyTargets(profile);\n\n  const target = dailyTargets[nutrientId]\n    ? dailyTargets[nutrientId] * 7\n    : null;\n  if (!target) return null;\n\n  const def = getNutrientById(nutrientId);\n  if (!def) return null;\n\n  let total = 0;\n  const grouped: Record<string, number> = {};\n\n  for (const [date, foods] of Object.entries(db.foodLog)) {\n    if (!isWithinWeek(date, start, end)) continue;\n\n    for (const entry of foods as any[]) {\n      const factor = entry.grams / 100;\n      const amountPer100g = entry.nutrients?.[nutrientId];\n      if (!amountPer100g) continue;\n\n      const amount = amountPer100g * factor;\n      total += amount;\n\n      grouped[entry.name] =\n        (grouped[entry.name] ?? 0) + amount;\n    }\n  }\n\n  const contributions = Object.entries(grouped)\n    .map(([foodName, amount]) => ({\n      foodName,\n      amount: Number(amount.toFixed(2)),\n    }))\n    .sort((a, b) => b.amount - a.amount)\n    .slice(0, 5);\n\n  return {\n    name: def.label,\n    unit: def.unit,\n    intake: Number(total.toFixed(2)),\n    target,\n    progress: Math.min(\n      100,\n      Math.round((total / target) * 100)\n    ),\n    contributions,\n  };\n}\n\nfunction computeFoodProgress(\n  nutrients: Record<string, number>,\n  grams: number\n) {\n  const profile = getUserProfile();\n  const dailyTargets = getDailyTargets(profile);\n\n  const focus: NutrientProgress[] = [];\n\n  for (const [nutrientId, amountPer100g] of Object.entries(nutrients)) {\n    const target = dailyTargets[nutrientId];\n    if (!target) continue;\n\n    const def = getNutrientById(nutrientId);\n    if (!def) continue;\n\n    const intake = (amountPer100g * grams) / 100;\n\n    focus.push({\n      id: nutrientId,\n      name: def.label,\n      progress: Math.min(\n        100,\n        Math.round((intake / target) * 100)\n      ),\n    });\n  }\n\n  return {\n    focus,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 480, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/app/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport NutrientCard from \"@/components/NutrientCard\";\nimport ProgressRing from \"@/components/ProgressRing\";\nimport { getWeeklyProgress } from \"@/lib/nutritionEngine\";\n\ntype Theme = string;\n\nconst THEME_REGEX = /data[-â€“]theme\\s*=\\s*\"([^\"]+)\"/g;\nconst MACROS = [\"protein\", \"fat\", \"carbohydrate\"];\n\nexport default function HomePage() {\n  const [progress, setProgress] = useState<any>(null);\n  const [theme, setTheme] = useState<Theme>(\"\");\n  const [themes, setThemes] = useState<Theme[]>([]);\n\n  // load saved theme\n  useEffect(() => {\n    const saved = localStorage.getItem(\"theme\");\n    if (saved) {\n      document.documentElement.setAttribute(\"data-theme\", saved);\n      setTheme(saved);\n    }\n  }, []);\n\n  // apply theme\n  useEffect(() => {\n    if (!theme) return;\n    document.documentElement.setAttribute(\"data-theme\", theme);\n    localStorage.setItem(\"theme\", theme);\n  }, [theme]);\n\n  // read themes from themes.md\n  useEffect(() => {\n    (async () => {\n      const res = await fetch(\"/themes.md\");\n      const text = await res.text();\n\n      const found = new Set<string>();\n      let match: RegExpExecArray | null;\n\n      while ((match = THEME_REGEX.exec(text))) {\n        found.add(match[1]);\n      }\n\n      setThemes(Array.from(found).sort());\n    })();\n  }, []);\n\n  // nutrition data\n  useEffect(() => {\n    getWeeklyProgress().then(setProgress);\n  }, []);\n\n  if (!progress) return <div className=\"p-4\">Loadingâ€¦</div>;\n\n  const calories = progress.all.find((n: any) => n.id === \"calories\");\n  const macros = progress.all.filter((n: any) =>\n    MACROS.includes(n.id)\n  );\n  const micros = progress.all.filter(\n    (n: any) => !MACROS.includes(n.id) && n.id !== \"calories\"\n  );\n\n  const microAvg =\n    micros.length === 0\n      ? 0\n      : Math.round(\n          (micros.reduce(\n            (sum: number, n: any) => sum + n.progress,\n            0\n          ) /\n            micros.length) *\n            100\n        ) / 100;\n\n  return (\n    <div className=\"p-4 space-y-6\">\n      {/* Theme selector */}\n      <div className=\"flex items-center gap-2\">\n        <select\n          value={theme}\n          onChange={(e) => setTheme(e.target.value)}\n          className=\"border rounded px-2 py-1 bg-transparent\"\n        >\n          <option value=\"\">System</option>\n          {themes.map((t) => (\n            <option key={t} value={t}>\n              {t}\n            </option>\n          ))}\n        </select>\n      </div>\n\n      <h1 className=\"text-xl font-semibold\">This Week</h1>\n\n      <section className=\"space-y-2\">\n        <h2 className=\"text-sm uppercase text-neutral-400 \">Calorie</h2>\n        <div className=\"grid gap-3\">\n          {calories && <NutrientCard {...calories} />}\n        </div>\n      </section>\n\n      <section className=\"space-y-2\">\n        <h2 className=\"text-sm uppercase text-neutral-400\">Macros</h2>\n        <div className=\"grid grid-cols-3 gap-3\">\n          {macros.map((n: any) => (\n            <NutrientCard key={n.id} {...n} />\n          ))}\n        </div>\n      </section>\n\n      <h2 className=\"text-sm uppercase text-neutral-400\">Micros</h2>\n      <div className=\"flex justify-center\">\n        <ProgressRing value={microAvg} />\n      </div>\n\n      <section className=\"space-y-2\">\n        <div className=\"grid grid-cols-3 gap-2\">\n          {micros.map((n: any) => (\n            <NutrientCard key={n.id} {...n} compact />\n          ))}\n        </div>\n      </section>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;;;AALA;;;;;AASA,MAAM,cAAc;AACpB,MAAM,SAAS;IAAC;IAAW;IAAO;CAAe;AAElC,SAAS;;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAM;IAC9C,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,yKAAQ,EAAQ;IAC1C,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAU,EAAE;IAEhD,mBAAmB;IACnB,IAAA,0KAAS;8BAAC;YACR,MAAM,QAAQ,aAAa,OAAO,CAAC;YACnC,IAAI,OAAO;gBACT,SAAS,eAAe,CAAC,YAAY,CAAC,cAAc;gBACpD,SAAS;YACX;QACF;6BAAG,EAAE;IAEL,cAAc;IACd,IAAA,0KAAS;8BAAC;YACR,IAAI,CAAC,OAAO;YACZ,SAAS,eAAe,CAAC,YAAY,CAAC,cAAc;YACpD,aAAa,OAAO,CAAC,SAAS;QAChC;6BAAG;QAAC;KAAM;IAEV,6BAA6B;IAC7B,IAAA,0KAAS;8BAAC;YACR;sCAAC;oBACC,MAAM,MAAM,MAAM,MAAM;oBACxB,MAAM,OAAO,MAAM,IAAI,IAAI;oBAE3B,MAAM,QAAQ,IAAI;oBAClB,IAAI;oBAEJ,MAAQ,QAAQ,YAAY,IAAI,CAAC,MAAQ;wBACvC,MAAM,GAAG,CAAC,KAAK,CAAC,EAAE;oBACpB;oBAEA,UAAU,MAAM,IAAI,CAAC,OAAO,IAAI;gBAClC;aAAC;QACH;6BAAG,EAAE;IAEL,iBAAiB;IACjB,IAAA,0KAAS;8BAAC;YACR,IAAA,8IAAiB,IAAG,IAAI,CAAC;QAC3B;6BAAG,EAAE;IAEL,IAAI,CAAC,UAAU,qBAAO,6LAAC;QAAI,WAAU;kBAAM;;;;;;IAE3C,MAAM,WAAW,SAAS,GAAG,CAAC,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;IACxD,MAAM,SAAS,SAAS,GAAG,CAAC,MAAM,CAAC,CAAC,IAClC,OAAO,QAAQ,CAAC,EAAE,EAAE;IAEtB,MAAM,SAAS,SAAS,GAAG,CAAC,MAAM,CAChC,CAAC,IAAW,CAAC,OAAO,QAAQ,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,KAAK;IAGjD,MAAM,WACJ,OAAO,MAAM,KAAK,IACd,IACA,KAAK,KAAK,CACR,AAAC,OAAO,MAAM,CACZ,CAAC,KAAa,IAAW,MAAM,EAAE,QAAQ,EACzC,KAEA,OAAO,MAAM,GACb,OACA;IAEV,qBACE,6LAAC;QAAI,WAAU;;0BAEb,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC;oBACC,OAAO;oBACP,UAAU,CAAC,IAAM,SAAS,EAAE,MAAM,CAAC,KAAK;oBACxC,WAAU;;sCAEV,6LAAC;4BAAO,OAAM;sCAAG;;;;;;wBAChB,OAAO,GAAG,CAAC,CAAC,kBACX,6LAAC;gCAAe,OAAO;0CACpB;+BADU;;;;;;;;;;;;;;;;0BAOnB,6LAAC;gBAAG,WAAU;0BAAwB;;;;;;0BAEtC,6LAAC;gBAAQ,WAAU;;kCACjB,6LAAC;wBAAG,WAAU;kCAAsC;;;;;;kCACpD,6LAAC;wBAAI,WAAU;kCACZ,0BAAY,6LAAC,yIAAY;4BAAE,GAAG,QAAQ;;;;;;;;;;;;;;;;;0BAI3C,6LAAC;gBAAQ,WAAU;;kCACjB,6LAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,6LAAC;wBAAI,WAAU;kCACZ,OAAO,GAAG,CAAC,CAAC,kBACX,6LAAC,yIAAY;gCAAa,GAAG,CAAC;+BAAX,EAAE,EAAE;;;;;;;;;;;;;;;;0BAK7B,6LAAC;gBAAG,WAAU;0BAAqC;;;;;;0BACnD,6LAAC;gBAAI,WAAU;0BACb,cAAA,6LAAC,yIAAY;oBAAC,OAAO;;;;;;;;;;;0BAGvB,6LAAC;gBAAQ,WAAU;0BACjB,cAAA,6LAAC;oBAAI,WAAU;8BACZ,OAAO,GAAG,CAAC,CAAC,kBACX,6LAAC,yIAAY;4BAAa,GAAG,CAAC;4BAAE,OAAO;2BAApB,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;AAMnC;GAnHwB;KAAA"}}]
}