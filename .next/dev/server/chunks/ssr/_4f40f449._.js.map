{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/components/BottomNav.tsx"],"sourcesContent":["import Link from \"next/link\";\nimport { signOut } from \"firebase/auth\";\nimport { auth } from \"@/lib/firebase\";\n\nfunction logoutHandler () {\n  signOut(auth);\n  window.location.href = \"/\"; // Redirect to login page\n}\n\nexport default function BottomNav() {\n  return (\n    <nav className=\"fixed bottom-0 left-0 right-0 bg-[var(--background)] border-t border-[var(--border)]\">\n      <div className=\"max-w-md mx-auto flex justify-around py-3\">\n        <Link href=\"/\">Home</Link>\n        <Link href=\"/log\">Log</Link>\n        <Link href=\"/history\">History</Link>\n        <Link href=\"/recommendations\">Recommendations</Link>\n        <Link href=\"/add\">Add</Link>\n        <button onClick={logoutHandler}>Logout</button>\n      </div>\n    </nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA;AACA;AAAA;AACA;;;;;AAEA,SAAS;IACP,IAAA,6KAAO,EAAC,uHAAI;IACZ,OAAO,QAAQ,CAAC,IAAI,GAAG,KAAK,yBAAyB;AACvD;AAEe,SAAS;IACtB,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC,uKAAI;oBAAC,MAAK;8BAAI;;;;;;8BACf,8OAAC,uKAAI;oBAAC,MAAK;8BAAO;;;;;;8BAClB,8OAAC,uKAAI;oBAAC,MAAK;8BAAW;;;;;;8BACtB,8OAAC,uKAAI;oBAAC,MAAK;8BAAmB;;;;;;8BAC9B,8OAAC,uKAAI;oBAAC,MAAK;8BAAO;;;;;;8BAClB,8OAAC;oBAAO,SAAS;8BAAe;;;;;;;;;;;;;;;;;AAIxC"}},
    {"offset": {"line": 91, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/app/recommendations/page.tsx"],"sourcesContent":["\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport { useProfile } from \"@/app/providers/ProfileProvider\";\nimport BottomNav from \"@/components/BottomNav\";\n\ntype StandardId = \"fda_dv_2024\" | \"usda_dri\";\ntype Sex = \"male\" | \"female\";\n\ntype UserProfile = {\n  recommendationSet?: \"fda_dv_2024\" | \"usda_dri\";\n  sex?: \"male\" | \"female\";\n  age?: number;\n  openaiApiKey?: string;\n};\n\ntype Row = {\n  id: string;\n  unit: string;\n  recommended: number;\n  value: number;\n  overridden: boolean;\n};\n\nexport default function RecommendationsPage() {\n\n  const [openaiApiKey, setOpenaiApiKey] = useState<string>(\"\");\n\n  const { profile, rows, profileReady, saveProfile: ctxSaveProfile, saveOpenaiApiKey: ctxSaveOpenaiApiKey, updateValue: ctxUpdateValue, resetAll: ctxResetAll } = useProfile();\n  const [standard, setStandard] = useState<StandardId | null>(null);\n  const [sex, setSex] = useState<Sex | null>(null);\n  const [age, setAge] = useState<number | null>(null);\n  \n  const [toast, setToast] = useState(false);\n\n  function saved() {\n    setToast(true);\n    setTimeout(() => setToast(false), 1200);\n  }\n  // sync profile -> local state\n  useEffect(() => {\n    if (profile) {\n      setStandard(profile.recommendationSet ?? null);\n      setSex(profile.sex ?? null);\n      setAge(typeof profile.age === \"number\" ? profile.age : null);\n      setOpenaiApiKey(profile.openaiApiKey ?? \"\");\n    }\n  }, [profile]);\n\n  async function saveProfile(next: { recommendationSet: StandardId; sex: Sex; age: number; }) {\n    await ctxSaveProfile(next);\n    saved();\n  }\n\n  async function saveOpenaiApiKey(next: string) {\n    await ctxSaveOpenaiApiKey(next);\n    setOpenaiApiKey(next);\n    saved();\n  }\n\n  async function updateValue(id: string, value: number) {\n    await ctxUpdateValue(id, value);\n    saved();\n  }\n\n  async function resetAll() {\n    await ctxResetAll();\n    saved();\n  }\n  return (\n    <div className=\"p-4 space-y-6\">\n      <h1 className=\"text-xl font-semibold\">Recommended Intake</h1>\n\n      {/* PROFILE CONTROLS */}\n      <div className=\"space-y-3 rounded-lg border border-muted p-3\">\n        <select\n          value={standard ?? \"\"}\n          onChange={e => {\n            const next = e.target.value as StandardId;\n            setStandard(next);\n            if (sex && age)\n              saveProfile({ recommendationSet: next, sex, age });\n          }}\n          className=\"p-2 rounded bg-[var(--muted)] w-full\"\n        >\n          <option value=\"\" disabled>\n            Select standard\n          </option>\n          <option value=\"fda_dv_2024\">FDA Daily Values</option>\n          <option value=\"usda_dri\">USDA DRI</option>\n        </select>\n\n        <select\n          value={sex ?? \"\"}\n          onChange={e => {\n            const next = e.target.value as Sex;\n            setSex(next);\n            if (standard && age)\n              saveProfile({ recommendationSet: standard, sex: next, age });\n          }}\n          className=\"p-2 rounded bg-[var(--muted)] w-full\"\n        >\n          <option value=\"\" disabled>\n            Select sex\n          </option>\n          <option value=\"female\">Female</option>\n          <option value=\"male\">Male</option>\n        </select>\n\n        <input\n          type=\"number\"\n          min={1}\n          max={120}\n          placeholder=\"Age\"\n          value={age ?? \"\"}\n          onChange={e => {\n            const next = Number(e.target.value);\n            setAge(next);\n            if (standard && sex)\n              saveProfile({ recommendationSet: standard, sex, age: next });\n          }}\n          className=\"p-2 rounded bg-[var(--muted)] w-full\"\n        />\n\n        {/* OpenAI API key (stored on your profile) */}\n        <input\n          type=\"password\"\n          placeholder=\"OpenAI API key (sk-...)\"\n          value={openaiApiKey}\n          onChange={e => setOpenaiApiKey(e.target.value)}\n          onBlur={() => saveOpenaiApiKey(openaiApiKey)}\n          className=\"p-2 rounded bg-[var(--muted)] w-full\"\n        />\n\n        <div className=\"flex gap-2\">\n          <button\n            onClick={() => saveOpenaiApiKey(openaiApiKey)}\n            className=\"flex-1 p-2 rounded bg-[var(--muted)] text-sm\"\n          >\n            Save OpenAI API Key\n          </button>\n        </div>\n\n        {!profileReady && (\n          <p className=\"text-sm text-muted-foreground\">\n            Complete your profile to see recommendations\n          </p>\n        )}\n      </div>\n\n      {/* RECOMMENDATIONS */}\n      {profileReady && (\n        <>\n          <div className=\"space-y-3\">\n            {rows.map(r => (\n              <div\n                key={r.id}\n                className=\"flex items-center justify-between gap-3 bg-[var(--muted)] p-3 rounded\"\n              >\n                <div>\n                  <div className=\"font-medium capitalize\">\n                    {r.id.replace(\"_\", \" \")}\n                  </div>\n                  <div className=\"text-xs text-neutral-400\">\n                    Default: {r.recommended} {r.unit}\n                  </div>\n                </div>\n\n                <input\n                  type=\"number\"\n                  value={r.value}\n                  onChange={e =>\n                    updateValue(r.id, Number(e.target.value))\n                  }\n                  className=\"w-24 p-2 rounded bg-[var(--muted)] text-right\"\n                />\n              </div>\n            ))}\n          </div>\n\n          <button\n            onClick={resetAll}\n            className=\"w-full p-3 rounded bg-[var(--muted)] text-sm\"\n          >\n            Restore Defaults\n          </button>\n        </>\n      )}\n\n      {toast && (\n        <div className=\"fixed bottom-6 left-1/2 -translate-x-1/2 rounded-full bg-black/80 px-4 py-2 text-sm text-white z-50\">\n          Saved!\n        </div>\n      )}\n    <BottomNav />\n    </div>\n  );\n\n}\n"],"names":[],"mappings":"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"}}]
}