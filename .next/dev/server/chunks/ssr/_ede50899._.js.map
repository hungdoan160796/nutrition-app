{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/components/NutrientCard.tsx"],"sourcesContent":["// app/components/NutrientCard.tsx\nimport Link from \"next/link\";\n\ntype Props = {\n  id: string;\n  name: string;\n  progress: number;\n  compact?: boolean;\n};\n\nexport default function NutrientCard({\n  id,\n  name,\n  progress,\n  compact = false,\n}: Props) {\n  return (\n    <Link\n      href={`/nutrients/${id}`}\n      className={`rounded-xl bg-neutral-900 ${\n        compact ? \"p-2\" : \"p-4\"\n      }`}\n    >\n      <div className=\"flex justify-between items-center\">\n        <span\n          className={`font-medium ${\n            compact ? \"text-xs\" : \"text-sm\"\n          }`}\n        >\n          {name}\n        </span>\n        <span className=\"text-xs text-neutral-400\">\n          {progress}%\n        </span>\n      </div>\n\n      <div\n        className={`mt-2 bg-neutral-800 rounded ${\n          compact ? \"h-1.5\" : \"h-2\"\n        }`}\n      >\n        <div\n          className=\"bg-emerald-500 rounded h-full\"\n          style={{ width: `${progress}%` }}\n        />\n      </div>\n    </Link>\n  );\n}\n"],"names":[],"mappings":";;;;;AAAA,kCAAkC;AAClC;;;AASe,SAAS,aAAa,EACnC,EAAE,EACF,IAAI,EACJ,QAAQ,EACR,UAAU,KAAK,EACT;IACN,qBACE,8OAAC,uKAAI;QACH,MAAM,CAAC,WAAW,EAAE,IAAI;QACxB,WAAW,CAAC,0BAA0B,EACpC,UAAU,QAAQ,OAClB;;0BAEF,8OAAC;gBAAI,WAAU;;kCACb,8OAAC;wBACC,WAAW,CAAC,YAAY,EACtB,UAAU,YAAY,WACtB;kCAED;;;;;;kCAEH,8OAAC;wBAAK,WAAU;;4BACb;4BAAS;;;;;;;;;;;;;0BAId,8OAAC;gBACC,WAAW,CAAC,4BAA4B,EACtC,UAAU,UAAU,OACpB;0BAEF,cAAA,8OAAC;oBACC,WAAU;oBACV,OAAO;wBAAE,OAAO,GAAG,SAAS,CAAC,CAAC;oBAAC;;;;;;;;;;;;;;;;;AAKzC"}},
    {"offset": {"line": 74, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/components/ProgressRing.tsx"],"sourcesContent":["type Props = {\n  value: number;\n};\n\nexport default function ProgressRing({ value }: Props) {\n  return (\n    <div className=\"w-40 h-40 rounded-full border-8 border-neutral-700 flex items-center justify-center\">\n      <div className=\"text-center\">\n        <div className=\"text-3xl font-bold\">{value}%</div>\n        <div className=\"text-xs text-neutral-400\">weekly</div>\n      </div>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;;AAIe,SAAS,aAAa,EAAE,KAAK,EAAS;IACnD,qBACE,8OAAC;QAAI,WAAU;kBACb,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAI,WAAU;;wBAAsB;wBAAM;;;;;;;8BAC3C,8OAAC;oBAAI,WAAU;8BAA2B;;;;;;;;;;;;;;;;;AAIlD"}},
    {"offset": {"line": 121, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/nutrientRegistry.ts"],"sourcesContent":["import nutrientData from \"@/data/nutrients.json\";\n\nexport type NutrientDef = {\n  id: string;\n  label: string;\n  unit: string;\n  usda_names: string[];\n};\n\nconst nutrients: NutrientDef[] = nutrientData.nutrients;\n\n// Map USDA name â†’ nutrient ID\nconst usdaNameToId = new Map<string, NutrientDef>();\n\nfor (const n of nutrients) {\n  for (const name of n.usda_names) {\n    usdaNameToId.set(name, n);\n  }\n}\n\nexport function getNutrientByUsdaName(name: string): NutrientDef | undefined {\n  return usdaNameToId.get(name);\n}\n\nexport function getNutrientById(id: string): NutrientDef | undefined {\n  return nutrients.find(n => n.id === id);\n}\n\nexport function getAllNutrients(): NutrientDef[] {\n  return nutrients;\n}\n"],"names":[],"mappings":";;;;;;;;AAAA;;AASA,MAAM,YAA2B,oGAAY,CAAC,SAAS;AAEvD,8BAA8B;AAC9B,MAAM,eAAe,IAAI;AAEzB,KAAK,MAAM,KAAK,UAAW;IACzB,KAAK,MAAM,QAAQ,EAAE,UAAU,CAAE;QAC/B,aAAa,GAAG,CAAC,MAAM;IACzB;AACF;AAEO,SAAS,sBAAsB,IAAY;IAChD,OAAO,aAAa,GAAG,CAAC;AAC1B;AAEO,SAAS,gBAAgB,EAAU;IACxC,OAAO,UAAU,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;AACtC;AAEO,SAAS;IACd,OAAO;AACT"}},
    {"offset": {"line": 152, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/userProfile.ts"],"sourcesContent":["import type { RecommendationSetId } from \"@/data/recommendations\";\n\nexport type UserProfile = {\n  recommendationSet: RecommendationSetId;\n  sex: \"male\" | \"female\";\n  age: number;\n};\n\nlet userProfile: UserProfile = {\n  recommendationSet: \"fda_dv_2024\",\n  sex: \"female\",\n  age: 30,\n};\n\nexport function getUserProfile(): UserProfile {\n  return userProfile;\n}\n\nexport function updateUserProfile(update: Partial<UserProfile>) {\n  userProfile = { ...userProfile, ...update };\n}\n"],"names":[],"mappings":";;;;;;AAQA,IAAI,cAA2B;IAC7B,mBAAmB;IACnB,KAAK;IACL,KAAK;AACP;AAEO,SAAS;IACd,OAAO;AACT;AAEO,SAAS,kBAAkB,MAA4B;IAC5D,cAAc;QAAE,GAAG,WAAW;QAAE,GAAG,MAAM;IAAC;AAC5C"}},
    {"offset": {"line": 176, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/localStore.web.ts"],"sourcesContent":["const KEY = \"nutrition_app_db\";\n\nexport async function loadLocalDB<T>() {\n  const raw = localStorage.getItem(KEY);\n  return raw ? JSON.parse(raw) : null;\n}\n\nexport async function saveLocalDB<T>(data: T) {\n  localStorage.setItem(KEY, JSON.stringify(data));\n}\n"],"names":[],"mappings":";;;;;;AAAA,MAAM,MAAM;AAEL,eAAe;IACpB,MAAM,MAAM,aAAa,OAAO,CAAC;IACjC,OAAO,MAAM,KAAK,KAAK,CAAC,OAAO;AACjC;AAEO,eAAe,YAAe,IAAO;IAC1C,aAAa,OAAO,CAAC,KAAK,KAAK,SAAS,CAAC;AAC3C"}},
    {"offset": {"line": 194, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/db.ts"],"sourcesContent":["const DB_NAME = \"nutrition_app\";\nconst DB_VERSION = 1;\n\nconst STORE_INTAKE = \"intake_log\";\n// db.ts (replace in-memory-only logic)\n\nimport { loadLocalDB, saveLocalDB } from \"./localStore.web\";\n\nexport type DBState = {\n  foodLog: Record<string, any[]>;\n  userProfile: any;\n  nutrientOverrides: Record<string, number>;\n};\n\n\nlet db: DBState = {\n  foodLog: {},\n  userProfile: null,\n  nutrientOverrides: {},   // ðŸ‘ˆ add this\n};\n\n\nexport async function initDB() {\n  const stored = await loadLocalDB<DBState>();\n  if (stored) db = stored;\n}\n\nexport function getDB() {\n  return db;\n}\n\nexport async function updateDB(mutator: (db: DBState) => void) {\n  mutator(db);\n  await saveLocalDB(db);\n}\n\nlet dbPromise: Promise<IDBDatabase> | null = null;\n\nfunction openDB(): Promise<IDBDatabase> {\n  if (dbPromise) return dbPromise;\n\n  dbPromise = new Promise((resolve, reject) => {\n    const request = indexedDB.open(DB_NAME, DB_VERSION);\n\n    request.onupgradeneeded = () => {\n      const db = request.result;\n\n      if (!db.objectStoreNames.contains(STORE_INTAKE)) {\n        db.createObjectStore(STORE_INTAKE, {\n          keyPath: \"id\",\n          autoIncrement: true,\n        });\n      }\n    };\n\n    request.onsuccess = () => resolve(request.result);\n    request.onerror = () => reject(request.error);\n  });\n\n  return dbPromise;\n}\n\n// ---------- Public API ----------\n\nexport async function addIntake(entry: any) {\n  const db = await openDB();\n  const tx = db.transaction(STORE_INTAKE, \"readwrite\");\n  tx.objectStore(STORE_INTAKE).add(entry);\n\n  return tx.oncomplete;\n}\n\nexport async function getAllIntake(): Promise<any[]> {\n  const db = await openDB();\n  const tx = db.transaction(STORE_INTAKE, \"readonly\");\n  const store = tx.objectStore(STORE_INTAKE);\n\n  return new Promise(resolve => {\n    const request = store.getAll();\n    request.onsuccess = () => resolve(request.result);\n  });\n}\n"],"names":[],"mappings":";;;;;;;;;;;;AAIA,uCAAuC;AAEvC;AANA,MAAM,UAAU;AAChB,MAAM,aAAa;AAEnB,MAAM,eAAe;;AAYrB,IAAI,KAAc;IAChB,SAAS,CAAC;IACV,aAAa;IACb,mBAAmB,CAAC;AACtB;AAGO,eAAe;IACpB,MAAM,SAAS,MAAM,IAAA,uIAAW;IAChC,IAAI,QAAQ,KAAK;AACnB;AAEO,SAAS;IACd,OAAO;AACT;AAEO,eAAe,SAAS,OAA8B;IAC3D,QAAQ;IACR,MAAM,IAAA,uIAAW,EAAC;AACpB;AAEA,IAAI,YAAyC;AAE7C,SAAS;IACP,IAAI,WAAW,OAAO;IAEtB,YAAY,IAAI,QAAQ,CAAC,SAAS;QAChC,MAAM,UAAU,UAAU,IAAI,CAAC,SAAS;QAExC,QAAQ,eAAe,GAAG;YACxB,MAAM,KAAK,QAAQ,MAAM;YAEzB,IAAI,CAAC,GAAG,gBAAgB,CAAC,QAAQ,CAAC,eAAe;gBAC/C,GAAG,iBAAiB,CAAC,cAAc;oBACjC,SAAS;oBACT,eAAe;gBACjB;YACF;QACF;QAEA,QAAQ,SAAS,GAAG,IAAM,QAAQ,QAAQ,MAAM;QAChD,QAAQ,OAAO,GAAG,IAAM,OAAO,QAAQ,KAAK;IAC9C;IAEA,OAAO;AACT;AAIO,eAAe,UAAU,KAAU;IACxC,MAAM,KAAK,MAAM;IACjB,MAAM,KAAK,GAAG,WAAW,CAAC,cAAc;IACxC,GAAG,WAAW,CAAC,cAAc,GAAG,CAAC;IAEjC,OAAO,GAAG,UAAU;AACtB;AAEO,eAAe;IACpB,MAAM,KAAK,MAAM;IACjB,MAAM,KAAK,GAAG,WAAW,CAAC,cAAc;IACxC,MAAM,QAAQ,GAAG,WAAW,CAAC;IAE7B,OAAO,IAAI,QAAQ,CAAA;QACjB,MAAM,UAAU,MAAM,MAAM;QAC5B,QAAQ,SAAS,GAAG,IAAM,QAAQ,QAAQ,MAAM;IAClD;AACF"}},
    {"offset": {"line": 266, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/recommendationEngine.ts"],"sourcesContent":["import { getDB } from \"@/lib/db\";\nimport {\n  RECOMMENDATION_SETS,\n  type RecommendationSetId,\n} from \"@/data/recommendations\";\n\ntype Sex = \"male\" | \"female\";\n\nexport type Profile = {\n  recommendationSet: RecommendationSetId;\n  sex: Sex;\n  age: number;\n};\n\nexport function getDailyTargets(\n  profile: Profile\n): Record<string, number> {\n  const db = getDB();\n  const overrides = db.nutrientOverrides ?? {};\n\n  const set = RECOMMENDATION_SETS[profile.recommendationSet];\n  const targets: Record<string, number> = {};\n\n  for (const r of set.recommendations) {\n    if (\n      (r.sex === \"any\" || r.sex === profile.sex) &&\n      profile.age >= r.age_min &&\n      profile.age <= r.age_max\n    ) {\n      targets[r.nutrient_id] = r.daily_value;\n    }\n  }\n\n  // overrides always win\n  for (const [id, value] of Object.entries(overrides)) {\n    targets[id] = value as number;\n  }\n\n  return targets;\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAaO,SAAS,gBACd,OAAgB;IAEhB,MAAM,KAAK,IAAA,kHAAK;IAChB,MAAM,YAAY,GAAG,iBAAiB,IAAI,CAAC;IAE3C,MAAM,MAAM,uJAAmB,CAAC,QAAQ,iBAAiB,CAAC;IAC1D,MAAM,UAAkC,CAAC;IAEzC,KAAK,MAAM,KAAK,IAAI,eAAe,CAAE;QACnC,IACE,CAAC,EAAE,GAAG,KAAK,SAAS,EAAE,GAAG,KAAK,QAAQ,GAAG,KACzC,QAAQ,GAAG,IAAI,EAAE,OAAO,IACxB,QAAQ,GAAG,IAAI,EAAE,OAAO,EACxB;YACA,OAAO,CAAC,EAAE,WAAW,CAAC,GAAG,EAAE,WAAW;QACxC;IACF;IAEA,uBAAuB;IACvB,KAAK,MAAM,CAAC,IAAI,MAAM,IAAI,OAAO,OAAO,CAAC,WAAY;QACnD,OAAO,CAAC,GAAG,GAAG;IAChB;IAEA,OAAO;AACT"}},
    {"offset": {"line": 294, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/foodData.ts"],"sourcesContent":["import rawData from \"@/data/foods_clean.json\";\nimport { getNutrientByUsdaName } from \"@/lib/nutrientRegistry\";\n\nexport type FoodSummary = {\n  id: string;\n  name: string;\n};\n\nexport type FoodNutrientMap = {\n  [nutrientId: string]: {\n    amount: number;\n    unit: string;\n  };\n};\n\nexport type FoodDetail = {\n  id: string;\n  name: string;\n  nutrients: FoodNutrientMap;\n  defaultPortionGrams?: number;\n};\n\nfunction normalizeFoods(): FoodDetail[] {\n  return rawData.map((food: any) => {\n    const nutrients: FoodNutrientMap = {};\n\n    for (const fn of food.foodNutrients ?? []) {\n      if (!fn.nutrient || fn.amount == null) continue;\n\n      const key = fn.nutrient.name;\n      const nutrientDef = getNutrientByUsdaName(fn.nutrient.name);\n        if (!nutrientDef) continue;\n\n        nutrients[nutrientDef.id] = {\n        amount: fn.amount,\n        unit: nutrientDef.unit,\n        };\n\n    }\n\n    return {\n      id: String(food.fdcId),\n      name: food.description,\n      nutrients,\n      defaultPortionGrams: food.foodPortions?.[0]?.gramWeight,\n    };\n  });\n}\n\nconst FOODS = normalizeFoods();\n\n/* ---------- Public API ---------- */\n\nexport function getFoodList(): FoodSummary[] {\n  return FOODS.map(f => ({\n    id: f.id,\n    name: f.name,\n  }));\n}\n\nexport function getFoodById(id: string): FoodDetail | undefined {\n  return FOODS.find(f => f.id === id);\n}\n"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAqBA,SAAS;IACP,OAAO,sGAAO,CAAC,GAAG,CAAC,CAAC;QAClB,MAAM,YAA6B,CAAC;QAEpC,KAAK,MAAM,MAAM,KAAK,aAAa,IAAI,EAAE,CAAE;YACzC,IAAI,CAAC,GAAG,QAAQ,IAAI,GAAG,MAAM,IAAI,MAAM;YAEvC,MAAM,MAAM,GAAG,QAAQ,CAAC,IAAI;YAC5B,MAAM,cAAc,IAAA,gJAAqB,EAAC,GAAG,QAAQ,CAAC,IAAI;YACxD,IAAI,CAAC,aAAa;YAElB,SAAS,CAAC,YAAY,EAAE,CAAC,GAAG;gBAC5B,QAAQ,GAAG,MAAM;gBACjB,MAAM,YAAY,IAAI;YACtB;QAEJ;QAEA,OAAO;YACL,IAAI,OAAO,KAAK,KAAK;YACrB,MAAM,KAAK,WAAW;YACtB;YACA,qBAAqB,KAAK,YAAY,EAAE,CAAC,EAAE,EAAE;QAC/C;IACF;AACF;AAEA,MAAM,QAAQ;AAIP,SAAS;IACd,OAAO,MAAM,GAAG,CAAC,CAAA,IAAK,CAAC;YACrB,IAAI,EAAE,EAAE;YACR,MAAM,EAAE,IAAI;QACd,CAAC;AACH;AAEO,SAAS,YAAY,EAAU;IACpC,OAAO,MAAM,IAAI,CAAC,CAAA,IAAK,EAAE,EAAE,KAAK;AAClC"}},
    {"offset": {"line": 339, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/lib/nutritionEngine.ts"],"sourcesContent":["// lib/nutritionEngine.ts\n// FIX: narrow Object.entries() values instead of using `unknown`\n\nimport { getNutrientById } from \"@/lib/nutrientRegistry\";\nimport { getUserProfile } from \"@/lib/userProfile\";\nimport { getDailyTargets } from \"@/lib/recommendationEngine\";\nimport { getDB, initDB, updateDB } from \"@/lib/db\";\nimport { getFoodById } from \"@/lib/foodData\";\n\nexport const WEEK_START = 1;\n\n// ---------- Types ----------\ntype NutrientAmount = {\n  amount: number;\n  unit: string;\n};\n\ntype LoggedFood = {\n  id: string;\n  name: string;\n  grams: number;\n  nutrients: Record<string, NutrientAmount>;\n  loggedAt: number;\n};\n\nexport type NutrientContribution = {\n  foodName: string;\n  amount: number;\n};\n\nexport type NutrientDetail = {\n  name: string;\n  unit: string;\n  intake: number;\n  target: number;\n  progress: number;\n  contributions: NutrientContribution[];\n};\n\nexport type NutrientProgress = {\n  id: string;\n  name: string;\n  progress: number;\n};\n\nexport type WeeklyProgress = {\n  overall: number;\n  all: NutrientProgress[];\n  focus: NutrientProgress[];\n};\n\n// ---------- Helpers ----------\n\nfunction getWeekRange(baseDate: Date = new Date()) {\n  const d = new Date(baseDate);\n  const diff = (d.getDay() - WEEK_START + 7) % 7;\n  d.setDate(d.getDate() - diff);\n  d.setHours(0, 0, 0, 0);\n\n  const start = new Date(d);\n  const end = new Date(d);\n  end.setDate(end.getDate() + 7);\n\n  return {\n    start: start.toISOString().slice(0, 10),\n    end: end.toISOString().slice(0, 10),\n  };\n}\n\nfunction isWithinWeek(dateIso: string, startIso: string, endIso: string) {\n  return dateIso >= startIso && dateIso < endIso;\n}\n\n// ---------- Core Logic ----------\n\nexport async function logFood(foodId: string, grams: number) {\n  await initDB();\n  const food = getFoodById(foodId);\n  if (!food) return;\n\n  const date = new Date().toISOString().slice(0, 10);\n\n  await updateDB(db => {\n    if (!db.foodLog[date]) db.foodLog[date] = [];\n\n    db.foodLog[date].push({\n      id: food.id,\n      name: food.name,\n      grams,\n      nutrients: food.nutrients,\n      loggedAt: Date.now(),\n    } as LoggedFood);\n  });\n}\n\n// ---------- Weekly Progress ----------\n\nexport async function getWeeklyProgress(\n  baseDate: Date = new Date()\n): Promise<WeeklyProgress> {\n  await initDB();\n  const db = getDB();\n\n  const { start, end } = getWeekRange(baseDate);\n  const profile = getUserProfile();\n  const dailyTargets = getDailyTargets(profile);\n\n  const weeklyTargets: Record<string, number> = {};\n  for (const [id, daily] of Object.entries(dailyTargets)) {\n    weeklyTargets[id] = daily * 7;\n  }\n\n  const totals: Record<string, number> = {};\n\n  for (const [date, foods] of Object.entries(db.foodLog)) {\n    if (!isWithinWeek(date, start, end)) continue;\n\n    for (const entry of foods as LoggedFood[]) {\n      const factor = entry.grams / 100;\n\n      for (const [nutrientId, nutrient] of Object.entries(\n        entry.nutrients as Record<string, NutrientAmount>\n      )) {\n        totals[nutrientId] =\n          (totals[nutrientId] ?? 0) + nutrient.amount * factor;\n      }\n    }\n  }\n\n  const all: NutrientProgress[] = [];\n\n  for (const [nutrientId, target] of Object.entries(weeklyTargets)) {\n    if (!target) continue;\n\n    const def = getNutrientById(nutrientId);\n    if (!def) continue;\n\n    const intake = totals[nutrientId] ?? 0;\n\n    all.push({\n      id: nutrientId,\n      name: def.label,\n      progress: Math.min(\n        100,\n        Math.round((intake / target) * 100)\n      ),\n    });\n  }\n\n  const overall =\n    all.length === 0\n      ? 0\n      : Math.round(all.reduce((s, n) => s + n.progress, 0) / all.length);\n\n  return {\n    overall,\n    all,\n    focus: all\n      .filter(n => n.progress < 100)\n      .sort((a, b) => a.progress - b.progress),\n  };\n}\n\n// ---------- Nutrient Detail ----------\n\nexport async function getNutrientDetail(\n  nutrientId: string,\n  baseDate: Date = new Date()\n): Promise<NutrientDetail | null> {\n  await initDB();\n  const db = getDB();\n\n  const { start, end } = getWeekRange(baseDate);\n  const profile = getUserProfile();\n  const dailyTargets = getDailyTargets(profile);\n\n  const target = dailyTargets[nutrientId]\n    ? dailyTargets[nutrientId] * 7\n    : null;\n  if (!target) return null;\n\n  const def = getNutrientById(nutrientId);\n  if (!def) return null;\n\n  let total = 0;\n  const grouped: Record<string, number> = {};\n\n  for (const [date, foods] of Object.entries(db.foodLog)) {\n    if (!isWithinWeek(date, start, end)) continue;\n\n    for (const entry of foods as LoggedFood[]) {\n      const nutrient = entry.nutrients[nutrientId];\n      if (!nutrient) continue;\n\n      const amount = nutrient.amount * (entry.grams / 100);\n      total += amount;\n\n      grouped[entry.name] =\n        (grouped[entry.name] ?? 0) + amount;\n    }\n  }\n\n  const contributions = Object.entries(grouped)\n    .map(([foodName, amount]) => ({\n      foodName,\n      amount: Number(amount.toFixed(2)),\n    }))\n    .sort((a, b) => b.amount - a.amount)\n    .slice(0, 5);\n\n  return {\n    name: def.label,\n    unit: def.unit,\n    intake: Number(total.toFixed(2)),\n    target,\n    progress: Math.min(\n      100,\n      Math.round((total / target) * 100)\n    ),\n    contributions,\n  };\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 473, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/app/page.tsx"],"sourcesContent":["// app/page.tsx\n\"use client\";\n\nimport { useEffect, useState } from \"react\";\nimport NutrientCard from \"@/components/NutrientCard\";\nimport ProgressRing from \"@/components/ProgressRing\";\nimport { getWeeklyProgress } from \"@/lib/nutritionEngine\";\n\n\nconst MACROS = [\"protein\", \"fat\", \"carbohydrate\"];\n\nexport default function HomePage() {\n  const [progress, setProgress] = useState<any>(null);\n\n  useEffect(() => {\n    getWeeklyProgress().then(setProgress);\n  }, []);\n\n  if (!progress) {\n    return <div className=\"p-4\">Loadingâ€¦</div>;\n  }\n  const calories = progress.all.find((n: any) => n.id === \"calories\");\n  const macros = progress.all.filter((n: any) =>\n    MACROS.includes(n.id)\n  );\n  macros.forEach((n: any) => {console.log(n.id, n.progress);});\n  if (!progress) {\n    return <div className=\"p-4\">Loadingâ€¦</div>;\n  }\n\n  const micros = progress.all.filter(\n    (n: any) => !MACROS.includes(n.id) && n.id !== \"calories\"\n  );\n  micros.forEach((n: any) => {console.log(n.id, n.progress);});\n  const microAvg =\n    micros.length === 0\n      ? 0\n      : Math.round(micros.reduce((sum: number, n: any) => sum + n.progress, 0) / micros.length * 100) / 100;\n  return (\n    <div className=\"p-4 space-y-6\">\n      <h1 className=\"text-xl font-semibold\">This Week</h1>\n\n      {/*calories*/}\n      {(\n        <section className=\"space-y-2\">\n          <h2 className=\"text-sm uppercase text-neutral-400\">Calorie</h2>\n          <div className=\"grid  gap-3\">\n            {calories && <NutrientCard key={calories.id} {...calories} />}\n          </div>\n        </section>\n      )}\n      {/* Macros */}\n      {(\n        <section className=\"space-y-2\">\n          <h2 className=\"text-sm uppercase text-neutral-400\">Macros</h2>\n          <div className=\"grid grid-cols-3 gap-3\">\n            {macros.map((n: any) => (\n              <NutrientCard key={n.id} {...n} />\n            ))}\n          </div>\n        </section>\n      )}\n      {/* Micros */}\n      <h2 className=\"text-sm uppercase text-neutral-400\">Micros</h2>\n      <div className=\"flex justify-center\">\n        <ProgressRing value={microAvg} />\n      </div>\n      {(\n        <section className=\"space-y-2\">\n          <div className=\"grid grid-cols-3 gap-2\">\n            {micros.map((n: any) => (\n              <NutrientCard key={n.id} {...n} compact />\n            ))}\n          </div>\n        </section>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;AACA;AACA;AANA,eAAe;AACf;;;;;;AAQA,MAAM,SAAS;IAAC;IAAW;IAAO;CAAe;AAElC,SAAS;IACtB,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,iNAAQ,EAAM;IAE9C,IAAA,kNAAS,EAAC;QACR,IAAA,2IAAiB,IAAG,IAAI,CAAC;IAC3B,GAAG,EAAE;IAEL,IAAI,CAAC,UAAU;QACb,qBAAO,8OAAC;YAAI,WAAU;sBAAM;;;;;;IAC9B;IACA,MAAM,WAAW,SAAS,GAAG,CAAC,IAAI,CAAC,CAAC,IAAW,EAAE,EAAE,KAAK;IACxD,MAAM,SAAS,SAAS,GAAG,CAAC,MAAM,CAAC,CAAC,IAClC,OAAO,QAAQ,CAAC,EAAE,EAAE;IAEtB,OAAO,OAAO,CAAC,CAAC;QAAY,QAAQ,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,QAAQ;IAAE;IAC1D,IAAI,CAAC,UAAU;QACb,qBAAO,8OAAC;YAAI,WAAU;sBAAM;;;;;;IAC9B;IAEA,MAAM,SAAS,SAAS,GAAG,CAAC,MAAM,CAChC,CAAC,IAAW,CAAC,OAAO,QAAQ,CAAC,EAAE,EAAE,KAAK,EAAE,EAAE,KAAK;IAEjD,OAAO,OAAO,CAAC,CAAC;QAAY,QAAQ,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,QAAQ;IAAE;IAC1D,MAAM,WACJ,OAAO,MAAM,KAAK,IACd,IACA,KAAK,KAAK,CAAC,OAAO,MAAM,CAAC,CAAC,KAAa,IAAW,MAAM,EAAE,QAAQ,EAAE,KAAK,OAAO,MAAM,GAAG,OAAO;IACtG,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAAwB;;;;;;0BAIpC,8OAAC;gBAAQ,WAAU;;kCACjB,8OAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,8OAAC;wBAAI,WAAU;kCACZ,0BAAY,8OAAC,sIAAY;4BAAoB,GAAG,QAAQ;2BAAzB,SAAS,EAAE;;;;;;;;;;;;;;;;0BAM/C,8OAAC;gBAAQ,WAAU;;kCACjB,8OAAC;wBAAG,WAAU;kCAAqC;;;;;;kCACnD,8OAAC;wBAAI,WAAU;kCACZ,OAAO,GAAG,CAAC,CAAC,kBACX,8OAAC,sIAAY;gCAAa,GAAG,CAAC;+BAAX,EAAE,EAAE;;;;;;;;;;;;;;;;0BAM/B,8OAAC;gBAAG,WAAU;0BAAqC;;;;;;0BACnD,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,sIAAY;oBAAC,OAAO;;;;;;;;;;;0BAGrB,8OAAC;gBAAQ,WAAU;0BACjB,cAAA,8OAAC;oBAAI,WAAU;8BACZ,OAAO,GAAG,CAAC,CAAC,kBACX,8OAAC,sIAAY;4BAAa,GAAG,CAAC;4BAAE,OAAO;2BAApB,EAAE,EAAE;;;;;;;;;;;;;;;;;;;;;AAOrC"}}]
}