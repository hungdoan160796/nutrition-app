{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/app/api/usda/search/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\n\nexport async function POST(req: Request) {\n  const { query } = await req.json();\n\n  if (!query) {\n    return NextResponse.json({ foods: [] });\n  }\n\n  const apiKey = process.env.USDA_API_KEY;\n  if (!apiKey) {\n    return NextResponse.json(\n      { error: \"USDA key missing\" },\n      { status: 500 }\n    );\n  }\n\n  const res = await fetch(\n    `https://api.nal.usda.gov/fdc/v1/foods/search?api_key=${apiKey}`,\n    {\n      method: \"POST\",\n      headers: { \"Content-Type\": \"application/json\" },\n      body: JSON.stringify({\n        query,\n        pageSize: 20,\n      }),\n    }\n  );\n\n  if (!res.ok) {\n    const text = await res.text();\n    console.error(text);\n    return NextResponse.json(\n      { error: \"USDA failed\" },\n      { status: 500 }\n    );\n  }\n\n  const data = await res.json();\n\n  return NextResponse.json({\n    foods: (data.foods || []).map((f: any) => ({\n      fdcId: f.fdcId,\n      description: f.description,\n    })),\n  });\n}\n"],"names":[],"mappings":";;;;AAAA;;AAEO,eAAe,KAAK,GAAY;IACrC,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,IAAI,IAAI;IAEhC,IAAI,CAAC,OAAO;QACV,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,EAAE;QAAC;IACvC;IAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,YAAY;IACvC,IAAI,CAAC,QAAQ;QACX,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAmB,GAC5B;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,MAAM,MAAM,MAChB,CAAC,qDAAqD,EAAE,QAAQ,EAChE;QACE,QAAQ;QACR,SAAS;YAAE,gBAAgB;QAAmB;QAC9C,MAAM,KAAK,SAAS,CAAC;YACnB;YACA,UAAU;QACZ;IACF;IAGF,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,QAAQ,KAAK,CAAC;QACd,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAc,GACvB;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,OAAO,MAAM,IAAI,IAAI;IAE3B,OAAO,gJAAY,CAAC,IAAI,CAAC;QACvB,OAAO,CAAC,KAAK,KAAK,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,IAAW,CAAC;gBACzC,OAAO,EAAE,KAAK;gBACd,aAAa,EAAE,WAAW;YAC5B,CAAC;IACH;AACF"}}]
}