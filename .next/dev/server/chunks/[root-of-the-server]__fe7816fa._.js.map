{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/hung.doan/Documents/GitHubPersonal/nutrition-app/app/api/foods/search/route.ts"],"sourcesContent":["// app/api/foods/search/route.ts\nimport { NextResponse } from \"next/server\";\n\nexport async function GET(req: Request) {\n  const { searchParams } = new URL(req.url);\n  const q = searchParams.get(\"q\");\n\n  if (!q) {\n    return NextResponse.json({ foods: [] });\n  }\n\n  const apiKey = process.env.USDA_API_KEY;\n  if (!apiKey) {\n    return NextResponse.json(\n      { error: \"USDA API key missing\" },\n      { status: 500 }\n    );\n  }\n\n  const res = await fetch(\n    `https://api.nal.usda.gov/fdc/v1/foods/search?query=${encodeURIComponent(\n      q\n    )}&pageSize=20&api_key=${apiKey}`\n  );\n\n  if (!res.ok) {\n    return NextResponse.json(\n      { error: \"Failed to fetch USDA\" },\n      { status: 500 }\n    );\n  }\n\n  const data = await res.json();\n\n  return NextResponse.json({\n    foods: (data.foods || []).map((f: any) => ({\n      fdcId: f.fdcId,\n      description: f.description,\n      brandName: f.brandOwner ?? f.brandName ?? null,\n      foodNutrients: f.foodNutrients ?? [],\n    })),\n  });\n}\n"],"names":[],"mappings":";;;;AAAA,gCAAgC;AAChC;;AAEO,eAAe,IAAI,GAAY;IACpC,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,IAAI,GAAG;IACxC,MAAM,IAAI,aAAa,GAAG,CAAC;IAE3B,IAAI,CAAC,GAAG;QACN,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,EAAE;QAAC;IACvC;IAEA,MAAM,SAAS,QAAQ,GAAG,CAAC,YAAY;IACvC,IAAI,CAAC,QAAQ;QACX,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAuB,GAChC;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,MAAM,MAAM,MAChB,CAAC,mDAAmD,EAAE,mBACpD,GACA,qBAAqB,EAAE,QAAQ;IAGnC,IAAI,CAAC,IAAI,EAAE,EAAE;QACX,OAAO,gJAAY,CAAC,IAAI,CACtB;YAAE,OAAO;QAAuB,GAChC;YAAE,QAAQ;QAAI;IAElB;IAEA,MAAM,OAAO,MAAM,IAAI,IAAI;IAE3B,OAAO,gJAAY,CAAC,IAAI,CAAC;QACvB,OAAO,CAAC,KAAK,KAAK,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,IAAW,CAAC;gBACzC,OAAO,EAAE,KAAK;gBACd,aAAa,EAAE,WAAW;gBAC1B,WAAW,EAAE,UAAU,IAAI,EAAE,SAAS,IAAI;gBAC1C,eAAe,EAAE,aAAa,IAAI,EAAE;YACtC,CAAC;IACH;AACF"}}]
}