(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,51806,e=>{e.v({nutrients:[{id:"protein",label:"Protein",unit:"g",category:"macronutrient",usda_names:["Protein"]},{id:"carbohydrate",label:"Carbo",unit:"g",category:"macronutrient",usda_names:["Carbohydrate, by difference"]},{id:"fat",label:"Fat",unit:"g",category:"macronutrient",usda_names:["Total lipid (fat)"]},{id:"fiber",label:"Fiber",unit:"g",category:"macronutrient",usda_names:["Fiber, total dietary"]},{id:"calories",label:"Calories",unit:"kcal",category:"macronutrient",usda_names:["Energy"]},{id:"iron",label:"Iron",unit:"mg",category:"mineral",usda_names:["Iron, Fe"]},{id:"calcium",label:"Calcium",unit:"mg",category:"mineral",usda_names:["Calcium, Ca"]},{id:"magnesium",label:"Magnesium",unit:"mg",category:"mineral",usda_names:["Magnesium, Mg"]},{id:"potassium",label:"Potassium",unit:"mg",category:"mineral",usda_names:["Potassium, K"]},{id:"sodium",label:"Sodium",unit:"mg",category:"mineral",usda_names:["Sodium, Na"]},{id:"zinc",label:"Zinc",unit:"mg",category:"mineral",usda_names:["Zinc, Zn"]},{id:"vitamin_a",label:"Vitamin A",unit:"µg",category:"vitamin",usda_names:["Vitamin A, RAE"]},{id:"vitamin_c",label:"Vitamin C",unit:"mg",category:"vitamin",usda_names:["Vitamin C, total ascorbic acid"]},{id:"vitamin_d",label:"Vitamin D",unit:"IU",category:"vitamin",usda_names:["Vitamin D (D2 + D3)"]},{id:"vitamin_e",label:"Vitamin E",unit:"mg",category:"vitamin",usda_names:["Vitamin E (alpha-tocopherol)"]},{id:"vitamin_k",label:"Vitamin K",unit:"µg",category:"vitamin",usda_names:["Vitamin K (phylloquinone)"]},{id:"vitamin_b12",label:"Vitamin B12",unit:"µg",category:"vitamin",usda_names:["Vitamin B-12"]},{id:"folate",label:"Folate",unit:"µg",category:"vitamin",usda_names:["Folate, total"]}]})},18566,(e,t,a)=>{t.exports=e.r(76562)},12419,e=>{"use strict";var t=e.i(8896),a=e.i(80807);async function n(e){let n=(await (0,t.getDB)()).nutrientOverrides??{},i=a.RECOMMENDATION_SETS[e.recommendationSet],r={};for(let t of i.recommendations)("any"===t.sex||t.sex===e.sex)&&e.age>=t.age_min&&e.age<=t.age_max&&(r[t.nutrient_id]=t.daily_value);for(let[e,t]of Object.entries(n))r[e]=t;return r}e.s(["getDailyTargets",()=>n])},93365,24782,e=>{"use strict";let t=e.i(51806).default.nutrients,a=new Map;for(let e of t)for(let t of e.usda_names)a.set(t,e);function n(e){return t.find(t=>t.id===e)}e.s(["getNutrientById",()=>n],24782);var i=e.i(12419),r=e.i(8896);function s(e=new Date){let t=new Date(e),a=(t.getDay()-2+7)%7;t.setDate(t.getDate()-a),t.setHours(0,0,0,0);let n=new Date(t),i=new Date(t);return i.setDate(i.getDate()+7),{start:n.toISOString().slice(0,10),end:i.toISOString().slice(0,10)}}async function o(e,t){let a=new Date().toISOString().slice(0,10);await (0,r.updateDB)(n=>{n.foodLog[a]||(n.foodLog[a]=[]);let i={};for(let[a,n]of Object.entries(e.nutrients??{}))"number"==typeof n&&(i[a]=n*t/100);n.foodLog[a].push({term:e.term,name:e.name,grams:t,nutrientsPer100g:e.nutrients,nutrients:i,loggedAt:Date.now()})})}async function l(e=new Date){await (0,r.initDB)();let t=await (0,r.getDB)();try{console.log("getWeeklyProgress: foodLog keys:",Object.keys(t.foodLog||{}).slice(0,10));let e=Object.keys(t.foodLog||{})[0];e&&console.log("getWeeklyProgress: sample entry:",t.foodLog[e]&&t.foodLog[e][0])}catch(e){console.log("getWeeklyProgress: failed to log sample",e)}let{start:a,end:o}=s(e),u=t.userProfile??{},m={recommendationSet:u.recommendationSet??"fda_dv_2024",sex:u.sex??"female",age:"number"==typeof u.age?u.age:30},d=await (0,i.getDailyTargets)(m),c={};for(let[e,t]of Object.entries(d))c[e]=7*t;let g={};for(let[e,n]of Object.entries(t.foodLog))if(e>=a&&e<o)for(let e of n){if(e.nutrients&&Object.keys(e.nutrients).length){for(let[t,a]of Object.entries(e.nutrients))"number"==typeof a&&(g[t]=(g[t]??0)+a);continue}if(!e.nutrientsPer100g)continue;let t=e.grams/100;for(let[a,n]of Object.entries(e.nutrientsPer100g))"number"==typeof n&&(g[a]=(g[a]??0)+n*t)}let f=[];for(let[e,t]of Object.entries(c)){let a=g[e];if(!a||!t)continue;let i=n(e);i&&f.push({id:e,name:i.label,progress:Math.min(100,Math.round(a/t*100))})}return{overall:Math.round(0===f.length?0:f.reduce((e,t)=>e+t.progress,0)/f.length),all:f,focus:f.filter(e=>e.progress<100).sort((e,t)=>e.progress-t.progress)}}async function u(e,t=new Date){await (0,r.initDB)();let a=await (0,r.getDB)(),{start:o,end:l}=s(t),m=a.userProfile??{},d={recommendationSet:m.recommendationSet??"fda_dv_2024",sex:m.sex??"female",age:"number"==typeof m.age?m.age:30},c=await (0,i.getDailyTargets)(d),g=c[e]?7*c[e]:null;if(!g)return null;let f=n(e);if(!f)return null;let b=0,y={};for(let[t,n]of Object.entries(a.foodLog))if(t>=o&&t<l)for(let t of n){if(t.nutrients&&"number"==typeof t.nutrients[e]){let a=t.nutrients[e];b+=a,y[t.name]=(y[t.name]??0)+a;continue}if(!t.nutrientsPer100g)continue;let a=t.nutrientsPer100g[e];if(!a)continue;let n=t.grams/100*a;b+=n,y[t.name]=(y[t.name]??0)+n}let p=Object.entries(y).map(([e,t])=>({foodName:e,amount:Number(t.toFixed(2))})).sort((e,t)=>t.amount-e.amount).slice(0,5);return{name:f.label,unit:f.unit,intake:Number(b.toFixed(2)),target:g,progress:Math.min(100,Math.round(b/g*100)),contributions:p}}e.s(["getNutrientDetail",()=>u,"getWeeklyProgress",()=>l,"logFood",()=>o],93365)},61622,e=>{"use strict";var t=e.i(43476),a=e.i(71645),n=e.i(93365),i=e.i(18566);function r(){let{id:e}=(0,i.useParams)(),[r,s]=(0,a.useState)(null),[o,l]=(0,a.useState)(!0);return((0,a.useEffect)(()=>{let t=!1;return l(!0),(0,n.getNutrientDetail)(e).then(e=>{if(t)return;if(!e){s(null),l(!1);return}let a=Object.values(e.contributions??{}).filter(e=>e.amount>0);s({...e,contributions:a}),l(!1)}),()=>{t=!0}},[e]),o)?(0,t.jsx)("div",{className:"p-4",children:"Loading…"}):r?(0,t.jsxs)("div",{className:"p-4 space-y-6",children:[(0,t.jsx)("h1",{className:"text-xl font-semibold",children:r.name}),(0,t.jsxs)("div",{className:"bg-[var(--muted)] text-[var(--foreground)] rounded-xl p-4 space-y-2",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{children:"Progress"}),(0,t.jsxs)("span",{children:[r.progress,"%"]})]}),(0,t.jsx)("div",{className:"h-2 bg-[var(--muted)] rounded",children:(0,t.jsx)("div",{className:"h-2 bg-[var(--accent)] rounded",style:{width:`${r.progress}%`}})}),(0,t.jsxs)("div",{className:"text-sm text-neutral-400",children:[r.intake," / ",r.target," ",r.unit," this week"]})]}),(0,t.jsxs)("section",{className:"space-y-3",children:[(0,t.jsx)("h2",{className:"text-sm uppercase text-neutral-400",children:"Top Contributors"}),0===r.contributions.length&&(0,t.jsx)("p",{className:"text-neutral-500 text-sm",children:"No foods logged yet."}),r.contributions.map(e=>(0,t.jsxs)("div",{className:"flex justify-between bg-[var(--muted)] text-[var(--foreground)] p-3 rounded",children:[(0,t.jsx)("span",{className:"truncate",children:e.foodName}),(0,t.jsxs)("span",{className:"text-neutral-400",children:[e.amount.toFixed(2)," ",r.unit]})]},e.foodId))]})]}):(0,t.jsx)("div",{className:"p-4 text-red-400",children:"No data for this nutrient."})}e.s(["default",()=>r])}]);